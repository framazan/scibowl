const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PracticeMode-CQ5UkFBe.js","assets/vendor-react-DpsG3A-O.js","assets/vendor-abs-svg-path-DCUpb6Nw.js","assets/visualBonuses-P43A_idX.js","assets/vendor-katex-DP_4UPSs.js","assets/vendor-katex-CIur2ABi.css","assets/vendor-firebase-storage-BvGgD_BW.js","assets/vendor-firebase-app-CZHFuJSY.js","assets/vendor-firebase-component-BsAoxdSC.js","assets/vendor-firebase-util-DLzrvjrQ.js","assets/vendor-firebase-logger-CNz1B4Yj.js","assets/vendor-idb-BXWtuYvb.js","assets/client-M5VKMgG_.js","assets/vendor-lucide-react-Lx6fY6Gz.js","assets/vendor-react-dom-D1u-fJLi.js","assets/vendor-scheduler-CoSDG3-6.js","assets/vendor-firebase-BxSqqaym.js","assets/vendor-firebase-app-check-D4a6coeq.js","assets/vendor-firebase-firestore-C-aRomGP.js","assets/vendor-firebase-webchannel-wrapper-QS5lB7L3.js","assets/vendor-mui-material-DksXbHt-.js","assets/vendor-mui-utils-B23qfrSe.js","assets/vendor-clsx-B-dksMZM.js","assets/vendor-mui-system-BndTH9qf.js","assets/vendor-mui-styled-engine-CPmDJbkS.js","assets/vendor-emotion-styled-5vLscvJp.js","assets/vendor-babel-runtime-WXw8LxeR.js","assets/vendor-emotion-serialize-B6qc6euy.js","assets/vendor-emotion-hash-WldOFDRm.js","assets/vendor-emotion-unitless-x5IvBceT.js","assets/vendor-emotion-memoize-3S_6p140.js","assets/vendor-emotion-use-insertion-effect-with-fallbacks-B--OEmuQ.js","assets/vendor-emotion-utils-BijCJQMc.js","assets/vendor-emotion-is-prop-valid-DOnQZHJ6.js","assets/vendor-emotion-react-DrbGOuDy.js","assets/vendor-hoist-non-react-statics-mDtaWys7.js","assets/vendor-react-is-CnyDuYXe.js","assets/vendor-emotion-cache-DvsOMRO7.js","assets/vendor-emotion-sheet-6IwnyhEX.js","assets/vendor-stylis-DDa9OTMq.js","assets/vendor-react-transition-group-Q1VPUTjR.js","assets/vendor-react-router-dom-D-i9eXTo.js","assets/vendor-react-router-D4SgS1v_.js","assets/vendor-remix-run-router-9r-WWGj9.js","assets/vendor-react-helmet-async-bvMvt1Ax.js","assets/vendor-react-fast-compare-BCtOC5yC.js","assets/vendor-invariant-DW3JcdOx.js","assets/vendor-shallowequal-Df9Q-7bk.js","assets/Admin-DNQkMHnk.js","assets/RoundGenerator-BQ1I8uRP.js","assets/vendor-react-pdf-renderer-DfOTdHag.js","assets/vendor-queue-IZnSDwnG.js","assets/vendor-inherits-BICa84dG.js","assets/vendor-events-DQ172AOg.js","assets/vendor-react-pdf-font-ByacAZ2x.js","assets/vendor-cross-fetch-DvOI2u39.js","assets/vendor-fontkit-5mDwoQ7O.js","assets/vendor-restructure-DwIbRzqP.js","assets/vendor-swc-helpers-DIxjOVuh.js","assets/vendor-fast-deep-equal-DtIvihjZ.js","assets/vendor-unicode-properties-BbL32wKl.js","assets/vendor-base64-js-BJmSPyJr.js","assets/vendor-unicode-trie-rSh8NucD.js","assets/vendor-tiny-inflate-BmeP50H3.js","assets/vendor-dfa-DFRa2UL2.js","assets/vendor-clone-DniFCc4t.js","assets/vendor-brotli-CUuIRSoC.js","assets/vendor-tslib-kHcLnhpD.js","assets/vendor-react-pdf-render-DYs5yDRr.js","assets/vendor-react-pdf-primitives-B6ApagcG.js","assets/vendor-react-pdf-fns-DIcDsgsD.js","assets/vendor-parse-svg-path-Bi0KIs1g.js","assets/vendor-normalize-svg-path-CFWHe3yZ.js","assets/vendor-svg-arc-to-cubic-bezier-DEq50KMd.js","assets/vendor-color-string-BKSasjlw.js","assets/vendor-color-name-Dju3oUBS.js","assets/vendor-simple-swizzle-3gX0Onlb.js","assets/vendor-is-arrayish-DyGeW-O8.js","assets/vendor-react-pdf-pdfkit-CgWEQEi-.js","assets/vendor-pako-CNe1bWpJ.js","assets/vendor-crypto-js-C9XMI5TL.js","assets/vendor-jay-peg-DnV82Tak.js","assets/vendor-react-pdf-png-js-D_OjzuBh.js","assets/vendor-react-pdf-layout-CVT9JNgr.js","assets/vendor-react-pdf-stylesheet-B2kC1IpU.js","assets/vendor-postcss-value-parser-DOXmp8r9.js","assets/vendor-hsl-to-hex-CDkcI7Vq.js","assets/vendor-hsl-to-rgb-for-reals-jL61FXS_.js","assets/vendor-media-engine-BWjc9dwl.js","assets/vendor-react-pdf-textkit-R3VqYnwu.js","assets/vendor-bidi-js-DLACMwmw.js","assets/vendor-hyphen-B2aENclZ.js","assets/vendor-yoga-layout-nAHjiEuJ.js","assets/vendor-react-pdf-image-BJ1YGwqv.js","assets/vendor-object-assign-Dm9xdUEz.js"])))=>i.map(i=>d[i]);
import{r as g,j as r,b as _}from"./vendor-react-DpsG3A-O.js";import{c as Ee}from"./vendor-react-dom-D1u-fJLi.js";import{g as Ne,o as Ae,G as Le,s as Re,a as Pe,c as De,b as _e,d as Ce}from"./vendor-firebase-BxSqqaym.js";import{i as Me,R as Oe,g as Ie}from"./vendor-firebase-app-check-D4a6coeq.js";import{g as Te,a as O,d as E,c as pe,b as Be,s as I,u as A,e as T,f as qe,r as $e,h as Fe,i as Ge,j as me}from"./vendor-firebase-firestore-C-aRomGP.js";import{c as fe,i as Ue}from"./vendor-firebase-app-CZHFuJSY.js";import"./vendor-firebase-logger-CNz1B4Yj.js";import{g as ze}from"./vendor-firebase-storage-BvGgD_BW.js";import{s as We,S as He}from"./vendor-mui-material-DksXbHt-.js";import{L as ge,c as Ke,R as Ve}from"./vendor-react-router-dom-D-i9eXTo.js";import{H as ae,a as Je}from"./vendor-react-helmet-async-bvMvt1Ax.js";import{d as Qe,c as Xe,f as Ye}from"./vendor-react-router-D4SgS1v_.js";import{U as Ze,H as et}from"./vendor-lucide-react-Lx6fY6Gz.js";import"./vendor-abs-svg-path-DCUpb6Nw.js";import"./vendor-scheduler-CoSDG3-6.js";import"./vendor-firebase-util-DLzrvjrQ.js";import"./vendor-firebase-component-BsAoxdSC.js";import"./vendor-firebase-webchannel-wrapper-QS5lB7L3.js";import"./vendor-idb-BXWtuYvb.js";import"./vendor-mui-utils-B23qfrSe.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-mui-system-BndTH9qf.js";import"./vendor-mui-styled-engine-CPmDJbkS.js";import"./vendor-emotion-styled-5vLscvJp.js";import"./vendor-babel-runtime-WXw8LxeR.js";import"./vendor-emotion-serialize-B6qc6euy.js";import"./vendor-emotion-hash-WldOFDRm.js";import"./vendor-emotion-unitless-x5IvBceT.js";import"./vendor-emotion-memoize-3S_6p140.js";import"./vendor-emotion-use-insertion-effect-with-fallbacks-B--OEmuQ.js";import"./vendor-emotion-utils-BijCJQMc.js";import"./vendor-emotion-is-prop-valid-DOnQZHJ6.js";import"./vendor-emotion-react-DrbGOuDy.js";import"./vendor-hoist-non-react-statics-mDtaWys7.js";import"./vendor-react-is-CnyDuYXe.js";import"./vendor-emotion-cache-DvsOMRO7.js";import"./vendor-emotion-sheet-6IwnyhEX.js";import"./vendor-stylis-DDa9OTMq.js";import"./vendor-react-transition-group-Q1VPUTjR.js";import"./vendor-remix-run-router-9r-WWGj9.js";import"./vendor-react-fast-compare-BCtOC5yC.js";import"./vendor-invariant-DW3JcdOx.js";import"./vendor-shallowequal-Df9Q-7bk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();const tt="modulepreload",rt=function(e){return"/"+e},he={},ie=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){let a=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");o=a(s.map(d=>{if(d=rt(d),d in he)return;he[d]=!0;const u=d.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":tt,u||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&l(c.reason);return t().catch(l)})},st={apiKey:"AIzaSyC-4y146WLvcjfTg1IrnRgpLJGLir3Kv6E",authDomain:"sciencebowl.org",projectId:"scibowl-analytics",storageBucket:"scibowl-analytics.firebasestorage.app",messagingSenderId:"579454885012",appId:"1:579454885012:web:2015104d8f5e3a6a302881"};let te;function Q(){return fe().length?te=fe()[0]:te=Ue(st),te}function L(){return X(),Te(Q())}function $(){return X(),Ne(Q())}function br(){return X(),ze(Q())}let re=null;function X(){try{window.FIREBASE_APPCHECK_DEBUG_TOKEN==="true"&&(self.FIREBASE_APPCHECK_DEBUG_TOKEN=!0);const e=Q();if(!re){const t="6LdP4s8rAAAAAH5skwAWa08TPDuqwlRul6Ild4xl";t&&(re=Me(e,{provider:new Oe(t),isTokenAutoRefreshEnabled:!0}))}return re}catch{return null}}async function xr(e=!1){try{const t=X();return t&&(await Ie(t,e))?.token||null}catch{return null}}function nt(e={}){const t=e.roundSubcollection||"rounds",[s,n]=g.useState([]),[o,l]=g.useState(!0),[i,c]=g.useState(null),[a,d]=g.useState(!1),[u,m]=g.useState(null),h=g.useRef(new Map),f=7200*60*1e3,p=g.useRef(null);function w(){return new Promise((b,v)=>{if(p.current)return b(p.current);const k=indexedDB.open("scibowl-rounds-cache",1);k.onupgradeneeded=()=>{const N=k.result;N.objectStoreNames.contains("rounds")||N.createObjectStore("rounds")},k.onsuccess=()=>{p.current=k.result,b(k.result)},k.onerror=()=>v(k.error)})}async function y(b){try{const v=await w();return await new Promise((k,N)=>{const R=v.transaction("rounds","readonly").objectStore("rounds").get(b);R.onsuccess=()=>k(R.result||null),R.onerror=()=>N(R.error)})}catch{return null}}async function j(b,v){try{const k=await w();await new Promise((N,S)=>{const G=k.transaction("rounds","readwrite").objectStore("rounds").put(v,b);G.onsuccess=()=>N(),G.onerror=()=>S(G.error)})}catch{}}g.useEffect(()=>{let b=!1;return(async()=>{try{l(!0);const v=await y("meta:tournaments");v&&!b&&n(v.list||[]);const k=L(),N=await O(E(k,"meta","tournaments"));if(!N.exists())throw new Error("meta/tournaments document not found");const S=N.data().list||[];b||n(S),j("meta:tournaments",{list:S,updatedAt:Date.now()})}catch(v){b||c(v)}finally{b||l(!1)}})(),()=>{b=!0}},[]);async function D(b,{force:v=!1}={}){const k=(b||[]).filter(Boolean);if(k.length===0)return;d(!0),m(null);const N=L();try{for(const S of k){if(h.current.get(S)&&!v)continue;const R=await y(`t:${S}`),G=R&&typeof R.updatedAt=="number"&&Date.now()-R.updatedAt<=f;if(R&&G&&!v){h.current.set(S,R.payload);continue}const je=pe(N,"tournaments",S,t),ke=await Be(je),Z={},z=[];ke.forEach(ue=>{const U=ue.data(),q=ue.id;Z[q]={id:q,...U};const ve=Array.isArray(U.tossups)?U.tossups:[],Se=Array.isArray(U.bonuses)?U.bonuses:[];for(const P of ve){const ee=P._origId||P.origId||P.id;z.push({...P,id:ee||`${S}__${q}__tu__${P.question_number}`,tournament:S,round:q})}for(const P of Se){const ee=P._origId||P.origId||P.id;z.push({...P,id:ee||`${S}__${q}__bo__${P.question_number}`,tournament:S,round:q})}}),h.current.set(S,{rounds:Z,flatQuestions:z}),j(`t:${S}`,{payload:{rounds:Z,flatQuestions:z},updatedAt:Date.now()})}}catch(S){m(S)}finally{d(!1)}}function B(b){const v=[];for(const k of b||[]){const N=h.current.get(k);N?.flatQuestions&&v.push(...N.flatQuestions)}return v}function x(b){const v=h.current.get(b);return v?Object.values(v.rounds).sort((k,N)=>k.round?.localeCompare?.(N.round||"")||0):[]}return{tournaments:s,loadingTournaments:o,errorTournaments:i,loading:a,error:u,ensureLoaded:D,getLoadedQuestions:B,getRounds:x}}const ot=We(He)(({theme:e})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="%23fff" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:e.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:e.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="%23fff" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:e.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));function we({checked:e,onChange:t,label:s}){const n=g.useCallback(()=>{t(!e)},[e,t]);return r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:12},children:[r.jsx(ot,{checked:e,onChange:o=>t(o.target.checked),inputProps:{"aria-label":"Toggle dark mode"}}),s?r.jsx("button",{type:"button",onClick:n,style:{border:"none",background:"transparent",padding:0,margin:0,color:"inherit",font:"inherit",cursor:"pointer",display:"inline-flex",alignItems:"center"},children:s}):null]})}const at="scibowl-user-cache",it=1;let W=null;const be=7200*60*1e3;function F(){return W||(W=new Promise((e,t)=>{const s=indexedDB.open(at,it);s.onupgradeneeded=()=>{const n=s.result;n.objectStoreNames.contains("roundsIndex")||n.createObjectStore("roundsIndex"),n.objectStoreNames.contains("roundDetails")||n.createObjectStore("roundDetails")},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)}),W)}async function C(e){try{const t=await F();return await new Promise((s,n)=>{const i=t.transaction("roundsIndex","readonly").objectStore("roundsIndex").get(e);i.onsuccess=()=>s(i.result||null),i.onerror=()=>n(i.error)})}catch{return null}}async function M(e,t){try{const s=await F();await new Promise((n,o)=>{const c=s.transaction("roundsIndex","readwrite").objectStore("roundsIndex").put(t,e);c.onsuccess=()=>n(),c.onerror=()=>o(c.error)})}catch{}}async function ce(e,t){try{const s=await F();return await new Promise((n,o)=>{const c=s.transaction("roundDetails","readonly").objectStore("roundDetails").get(`${e}::${t}`);c.onsuccess=()=>n(c.result||null),c.onerror=()=>o(c.error)})}catch{return null}}async function Y(e,t,s){try{const n=await F();await new Promise((o,l)=>{const a=n.transaction("roundDetails","readwrite").objectStore("roundDetails").put(s,`${e}::${t}`);a.onsuccess=()=>o(),a.onerror=()=>l(a.error)})}catch{}}async function ct(e,t){try{const s=await F();await new Promise(n=>{const i=s.transaction("roundDetails","readwrite").objectStore("roundDetails").delete(`${e}::${t}`);i.onsuccess=()=>n(),i.onerror=()=>n()})}catch{}}async function lt(e){try{const t=await F();await new Promise((s,n)=>{const o=t.transaction(["roundsIndex","roundDetails"],"readwrite"),l=o.objectStore("roundsIndex"),i=o.objectStore("roundDetails"),c=l.delete(e);c.onerror=()=>n(c.error),c.onsuccess=()=>{const a=i.getAllKeys();a.onsuccess=()=>{const d=(a.result||[]).filter(m=>typeof m=="string"&&m.startsWith(`${e}::`));let u=d.length;if(u===0){s();return}d.forEach(m=>{const h=i.delete(m);h.onsuccess=()=>{--u===0&&s()},h.onerror=()=>{--u===0&&s()}})},a.onerror=()=>s()}})}catch{}}async function yr(e,t){if(!e)throw new Error("Not authenticated");const s=L(),n=pe(s,"users",e,"rounds"),o=await Ge(n,{...t,createdAt:me()}),l=E(s,"users",e,"meta","roundsIndex"),i={title:t.title,count:t.count,createdAt:me()};await I(l,{entries:{[o.id]:i}},{merge:!0});try{const c=Math.floor(Date.now()/1e3),a=await C(e),d=a?.entries?{...a.entries}:{};d[o.id]={title:t.title,count:t.count,createdAt:{seconds:c}},await M(e,{entries:d,updatedAt:Date.now()}),await Y(e,o.id,{data:{id:o.id,...t,createdAt:{seconds:c}},updatedAt:Date.now()})}catch{}return o.id}async function jr(e,{force:t=!1}={}){if(!e)return[];if(!t){const d=await C(e);if(d&&d.entries&&!(typeof d.updatedAt=="number"?Date.now()-d.updatedAt>be:!0)){const m=Object.entries(d.entries).map(([h,f])=>({id:h,...f}));return m.sort((h,f)=>(f.createdAt?.seconds||0)-(h.createdAt?.seconds||0)),m}}const s=L(),n=E(s,"users",e,"meta","roundsIndex"),o=await O(n);if(!o.exists())return await M(e,{entries:{},updatedAt:Date.now()}),[];const l=o.data()||{};let i=l.entries||{};const c=l.folders||{};if(!i||Object.keys(i).length===0){const d={};for(const[u,m]of Object.entries(l))if(u.startsWith("entries.")){const h=u.slice(8);h&&(d[h]=m)}Object.keys(d).length>0&&(i=d)}await M(e,{entries:i,folders:c,updatedAt:Date.now()});const a=Object.entries(i).map(([d,u])=>({id:d,...u}));return a.sort((d,u)=>{const m=d.createdAt?.seconds||0;return(u.createdAt?.seconds||0)-m}),a}async function kr(e,t,{force:s=!1}={}){if(!e||!t)return null;const n=await ce(e,t);if(n&&!s&&n&&typeof n=="object"&&"data"in n&&"updatedAt"in n&&!(typeof n.updatedAt=="number"?Date.now()-n.updatedAt>be:!0))return n.data;const o=L(),l=E(o,"users",e,"rounds",t),i=await O(l);if(!i.exists())return null;const c={id:i.id,...i.data()};return await Y(e,t,{data:c,updatedAt:Date.now()}),c}async function vr(e,{force:t=!1}={}){if(!e)return[];if(!t){const a=await C(e),d=a?.folders?Object.keys(a.folders):null;if(d)return d}const s=L(),n=E(s,"users",e,"meta","roundsIndex"),o=await O(n),i=(o.exists()?o.data()||{}:{}).folders||{},c=await C(e);return await M(e,{entries:c?.entries||{},folders:i,updatedAt:Date.now()}),Object.keys(i)}async function Sr(e,t){if(!e)throw new Error("Not authenticated");const s=(t??"").toString().trim();if(!s)throw new Error("Folder name required");const n=L(),o=E(n,"users",e,"meta","roundsIndex");await I(o,{folders:{[s]:!0}},{merge:!0});const l=await C(e),i={...l?.folders||{},[s]:!0};return await M(e,{entries:l?.entries||{},folders:i,updatedAt:Date.now()}),!0}async function Er(e,t,s){if(!e)throw new Error("Not authenticated");const n=(t??"").toString().trim(),o=(s??"").toString().trim();if(!n)throw new Error("Source folder name required");if(!o)throw new Error("Destination folder name required");if(n===o)return!0;const l=L(),i=E(l,"users",e,"meta","roundsIndex"),c=await O(i);if(!c.exists())throw new Error("No folders meta found");const a=c.data()||{},d={...a.entries||{}},u={...a.folders||{}};if(!u[n])throw new Error("Folder does not exist");if(u[o])throw new Error("A folder with that name already exists");const m={};for(const[f,p]of Object.entries(d))p&&p.folder===n&&(m[`entries.${f}.folder`]=o,d[f]={...p,folder:o});await A(i,{[`folders.${n}`]:T(),[`folders.${o}`]:!0}).catch(async()=>{const f={folders:{[o]:!0}};await I(i,f,{merge:!0})}),Object.keys(m).length>0&&await A(i,m).catch(async()=>{await I(i,{entries:d},{merge:!0})});const h=Object.entries(d).filter(([,f])=>f.folder===o).map(([f])=>f);for(const f of h)try{const p=E(l,"users",e,"rounds",f);await A(p,{folder:o})}catch{}try{const f=await C(e);if(f){const p={...f.folders||{}};delete p[n],p[o]=!0;const w={...f.entries||{}};for(const[y,j]of Object.entries(w))j&&j.folder===n&&(w[y]={...j,folder:o});await M(e,{entries:w,folders:p,updatedAt:Date.now()})}}catch{}return!0}async function Nr(e,t){if(!e)throw new Error("Not authenticated");const s=(t??"").toString().trim();if(!s)throw new Error("Folder name required");const n=L(),o=E(n,"users",e,"meta","roundsIndex"),l=await O(o);if(!l.exists())return!0;const i=l.data()||{};if(!{...i.folders||{}}[s])return!0;const a={...i.entries||{}},d={};for(const[u,m]of Object.entries(a))m&&m.folder===s&&(d[`entries.${u}.folder`]=T(),delete a[u].folder);try{await A(o,{[`folders.${s}`]:T()})}catch{}if(Object.keys(d).length>0)try{await A(o,d)}catch{await I(o,{entries:a},{merge:!0})}for(const[u,m]of Object.entries(a))if(!m.folder)try{const h=E(n,"users",e,"rounds",u);await A(h,{folder:T()})}catch{}try{const u=await C(e);if(u){const m={...u.folders||{}};delete m[s];const h={...u.entries||{}};for(const[f,p]of Object.entries(h))if(p&&p.folder===s){const{folder:w,...y}=p;h[f]=y}await M(e,{entries:h,folders:m,updatedAt:Date.now()})}}catch{}return!0}async function Ar(e,t){if(!e||!t)throw new Error("Missing uid/roundId");const s=L(),n=E(s,"users",e,"rounds",t);try{await qe(n)}catch{}const o=E(s,"users",e,"meta","roundsIndex");try{await A(o,{[`entries.${t}`]:T()})}catch{try{const i=await O(o),a={...(i.exists()?i.data()||{}:{}).entries||{}};t in a&&delete a[t],await I(o,{entries:a},{merge:!0})}catch{}}try{const l=await C(e);if(l?.entries&&t in l.entries){const{[t]:i,...c}=l.entries;await M(e,{entries:c,updatedAt:Date.now()})}await ct(e,t)}catch{}return!0}async function Lr(e,t,s){if(!e||!t)throw new Error("Missing uid/roundId");const n=L(),o=E(n,"users",e,"rounds",t),l=E(n,"users",e,"meta","roundsIndex");try{s&&s.trim().length>0?await A(o,{folder:s.trim()}):await A(o,{folder:T()})}catch{}try{s&&s.trim().length>0?await A(l,{[`entries.${t}.folder`]:s.trim()}):await A(l,{[`entries.${t}.folder`]:T()})}catch{s&&s.trim().length>0&&await I(l,{entries:{[t]:{folder:s.trim()}}},{merge:!0})}try{const i=await C(e);if(i?.entries){const a={...i.entries};if(a[t]||(a[t]={}),s&&s.trim().length>0)a[t]={...a[t],folder:s.trim()};else{const{folder:d,...u}=a[t];a[t]=u}await M(e,{entries:a,updatedAt:Date.now()})}const c=await ce(e,t);if(c&&c.data){const a={...c.data};s&&s.trim().length>0?a.folder=s.trim():delete a.folder,await Y(e,t,{data:a,updatedAt:Date.now()})}}catch{}return!0}function Rr(e){const t=new Set,s=e?.pairs||[];for(const n of s)n.tossupId&&t.add(n.tossupId),n.bonusId&&t.add(n.bonusId);return t}async function Pr(e,t,s){if(!e)throw new Error("Not authenticated");if(!t)throw new Error("Missing roundId");const n=(s??"").toString().trim();if(n.length===0)throw new Error("Title cannot be empty");const o=L(),l=E(o,"users",e,"rounds",t);await A(l,{title:n});const i=E(o,"users",e,"meta","roundsIndex");try{await A(i,{[`entries.${t}.title`]:n})}catch{await I(i,{entries:{[t]:{title:n}}},{merge:!0})}try{const c=await C(e);c&&c.entries&&c.entries[t]&&(c.entries[t]={...c.entries[t],title:n},await M(e,{...c,updatedAt:Date.now()}));const a=await ce(e,t);if(a&&a.data){const d={...a,data:{...a.data,title:n},updatedAt:Date.now()};await Y(e,t,d)}}catch{}return!0}async function Dr({questionType:e="both",categories:t=[],count:s=1,adminUid:n="fkLJJ2R6HbdwqoXSxrLUybZ0IdH2"}={}){const o=L(),l=E(o,"users",n,"meta","presets");let i=[];try{const w=await O(l),y=w.exists()?w.data()||{}:{};i=Array.isArray(y?.set)?[...y.set]:[]}catch{return{roundId:null}}if(!i||i.length===0)return{roundId:null};const c=Math.max(1,Number(s)||1),a=Array.isArray(t)&&t.length?new Set(t.map(w=>String(w).toUpperCase())):null,d=(e||"both").toLowerCase();function u(w){if(!Array.isArray(w))return 0;let y=[];return d==="tossup"?y=w.filter(j=>!!j?.tossupMeta&&(!a||a.has(String(j.tossupMeta.category||"").toUpperCase()))):d==="bonus"?y=w.filter(j=>!!j?.bonusMeta&&(!a||a.has(String(j.bonusMeta.category||"").toUpperCase()))):y=w.filter(j=>!!j?.tossupMeta&&(!a||a.has(String(j.tossupMeta.category||"").toUpperCase()))),y.length}const m=[];let h=null;for(let w=0;w<i.length;w++){const y=i[w];try{const j=await O(E(o,"users",n,"rounds",y));if(!j.exists())continue;const D=j.data()?.pairs||[];u(D)>=c&&m.push({index:w,rid:y,pairs:D})}catch{}}if(m.length===0)return{roundId:null};const f=m[Math.floor(Math.random()*m.length)],p=f.rid;h=f.pairs;try{await $e(o,async w=>{const y=await w.get(l),j=y.exists()?y.data()||{}:{},D=Array.isArray(j.set)?[...j.set]:[],B=D.indexOf(p);B!==-1&&(D.splice(B,1),w.set(l,{set:D},{merge:!0}))})}catch{try{await A(l,{set:Fe(p)})}catch{}}return{roundId:p,pairs:h}}function xe(){const[e,t]=g.useState(null),[s,n]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{const u=$(),m=Ae(u,h=>{t(h),n(!1)},h=>{l(h),n(!1)});return()=>m()},[]);const i=g.useCallback(async()=>{const u=$(),m=new Le;await Re(u,m)},[]),c=g.useCallback(async(u,m)=>{const h=$();await Pe(h,u,m)},[]),a=g.useCallback(async(u,m)=>{const h=$();await De(h,u,m)},[]),d=g.useCallback(async()=>{const u=$(),m=u.currentUser?.uid;await _e(u),m&&await lt(m)},[]);return{user:e,loading:s,error:o,loginWithGoogle:i,loginWithEmail:c,signupWithEmail:a,logout:d}}function dt(){const e={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://sciencebowl.org/"},{"@type":"ListItem",position:2,name:"Round Generator",item:"https://sciencebowl.org/round-generator"}]};return r.jsxs(ae,{children:[r.jsx("title",{children:"Round Generator & Practice | DA SciBowl"}),r.jsx("meta",{name:"description",content:"Generate custom Science Bowl practice rounds instantly. Filter by tournament, practice toss-ups and bonuses, and prepare for competitions."}),r.jsx("link",{rel:"canonical",href:"https://sciencebowl.org/round-generator"}),r.jsx("script",{type:"application/ld+json",children:JSON.stringify(e)})]})}function ut(){const e={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://sciencebowl.org/"},{"@type":"ListItem",position:2,name:"Practice",item:"https://sciencebowl.org/practice"}]};return r.jsxs(ae,{children:[r.jsx("title",{children:"Science Bowl Practice Mode | Davidson Science Bowl"}),r.jsx("meta",{name:"description",content:"Practice Science Bowl questions by selecting tournaments and generating custom practice sets."}),r.jsx("link",{rel:"canonical",href:"https://sciencebowl.org/practice"}),r.jsx("script",{type:"application/ld+json",children:JSON.stringify(e)}),r.jsx("meta",{name:"robots",content:"follow"})]})}function mt(){return r.jsxs(ae,{children:[r.jsx("title",{children:"Sign In | Science Bowl Practice"}),r.jsx("meta",{name:"robots",content:"noindex,nofollow"}),r.jsx("meta",{name:"description",content:"Sign in to access Science Bowl round generation and practice features."}),r.jsx("link",{rel:"canonical",href:"https://sciencebowl.org/signin"})]})}const ft="scibowl_current_cache",ht=1,V="kv";function pt(){return new Promise((e,t)=>{const s=indexedDB.open(ft,ht);s.onerror=()=>t(s.error),s.onupgradeneeded=()=>{const n=s.result;n.objectStoreNames.contains(V)||n.createObjectStore(V)},s.onsuccess=()=>e(s.result)})}async function le(e,t){const s=await pt();return new Promise((n,o)=>{const l=s.transaction(V,e),i=l.objectStore(V);let c=!1;l.oncomplete=()=>{c||n()},l.onerror=()=>{c||o(l.error)};const a=t(i);Promise.resolve(a).then(d=>{c=!0,n(d)},d=>{c=!0,o(d)})})}async function gt(e){return le("readonly",t=>new Promise((s,n)=>{const o=t.get(e);o.onsuccess=()=>s(o.result??null),o.onerror=()=>n(o.error)}))}async function oe(e,t){return le("readwrite",s=>new Promise((n,o)=>{const l=s.put(t,e);l.onsuccess=()=>n(!0),l.onerror=()=>o(l.error)}))}async function H(e){return le("readwrite",t=>new Promise((s,n)=>{const o=t.delete(e);o.onsuccess=()=>s(!0),o.onerror=()=>n(o.error)}))}const ye=g.createContext(null);function wt({children:e}){const[t,s]=g.useState([]),[n,o]=g.useState([]),l=d=>{try{return Array.isArray(d)?d.map(u=>({t:u?.tossup?.id||null,b:u?.bonus?.id||null})):[]}catch{return[]}},i=d=>{try{return Array.isArray(d)?d.map(u=>({tu:u?.tossup?{id:u.tossup.id,tournament:u.tossup.tournament}:null,bo:u?.bonus?{id:u.bonus.id,tournament:u.bonus.tournament}:null})):[]}catch{return[]}},c=d=>{s(u=>{const m=typeof d=="function"?d(u):d;try{window.__sbGeneratedPairs=m,oe("sb_current_round",l(m)),oe("sb_current_round_meta",i(m))}catch{}return m})},a=d=>{o(u=>[...u,d]),c(d)};return g.useEffect(()=>{let d=!0;return(async()=>{if(d){try{await H("sb_generated_history")}catch{}try{await H("sb_generated_history_meta")}catch{}try{await H("sb_current_round")}catch{}try{await H("sb_current_round_meta")}catch{}}})(),()=>{d=!1}},[]),r.jsx(ye.Provider,{value:{generatedPairs:t,setGeneratedPairs:c,history:n,pushGeneratedRound:a},children:e})}function bt(){const e=g.useContext(ye);if(!e)throw new Error("useRoundSession must be used within a RoundSessionProvider");return e}const J="themePreference";function xt(){try{return!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}catch{return!1}}function K(e){return e==="dark"?!0:e==="light"?!1:xt()}async function yt(){try{const e=localStorage.getItem(J);if(e==="light"||e==="dark"||e==="system")return e}catch{}try{const e=await gt(J);if(e==="light"||e==="dark"||e==="system")return e}catch{}return"system"}async function jt(e){try{await oe(J,e)}catch{}try{localStorage.setItem(J,e)}catch{}}function kt(e){let t;try{t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)")}catch{}if(!t)return()=>{};const s=n=>{e(!!n.matches)};return t.addEventListener?t.addEventListener("change",s):t.addListener&&t.addListener(s),()=>{t.removeEventListener?t.removeEventListener("change",s):t.removeListener&&t.removeListener(s)}}const vt=g.lazy(()=>ie(()=>import("./PracticeMode-CQ5UkFBe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]))),St=g.lazy(()=>ie(()=>import("./Admin-DNQkMHnk.js"),__vite__mapDeps([48,1,2,18,7,8,9,10,11,19,3,4,5,6,14,15,16,17,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,13]))),Et=g.lazy(()=>ie(()=>import("./RoundGenerator-BQ1I8uRP.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,9,10,11,12,13,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,26,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,14,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])));function Nt({active:e,children:t,onClick:s}){return r.jsx("button",{onClick:s,className:`btn ${e?"btn-primary":"btn-ghost"}`,"aria-pressed":e,children:t})}function se(){const e=nt(),t=xe(),s=Qe(),n=Xe(),{generatedPairs:o,setGeneratedPairs:l,pushGeneratedRound:i}=bt(),c=s.pathname.startsWith("/practice")?"practice":s.pathname.startsWith("/admin")?"admin":"generate",[a,d]=g.useState("system"),[u,m]=g.useState(()=>{try{return document.documentElement.classList.contains("dark")}catch{return K("system")}}),h=_.useRef(!1);return g.useEffect(()=>{let f=!0;return yt().then(p=>{f&&(d(p),m(K(p)))}),()=>{f=!1}},[]),g.useEffect(()=>{document.documentElement.classList.toggle("dark",u),u?document.body.classList.add("dark-bg"):document.body.classList.remove("dark-bg");let f=document.querySelector('meta[name="theme-color"]');f||(f=document.createElement("meta"),f.setAttribute("name","theme-color"),document.head.appendChild(f)),f.setAttribute("content",u?"#000000":"#ffffff")},[u]),g.useEffect(()=>{h.current&&jt(a)},[a]),g.useEffect(()=>{if(a!=="system")return;m(K("system"));const f=kt(p=>{m(!!p)});return()=>f&&f()},[a]),g.useEffect(()=>{try{const f="admin-border-on",p=document.body,w=document.documentElement;return c==="admin"?(p.classList.add(f),w.classList.add(f)):(p.classList.remove(f),w.classList.remove(f)),()=>{p.classList.remove(f),w.classList.remove(f)}}catch{}},[c]),r.jsxs("div",{className:"min-h-screen app-radial-bg dark:app-radial-bg transition-colors glass-backdrop",children:[r.jsx("style",{children:`
    html.admin-border-on::before, body.admin-border-on::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 6px #dc2626;
      z-index: 2147483647; /* max to sit above app */
    }
    @media (max-width: 480px) {
      html.admin-border-on::before, body.admin-border-on::before {
        box-shadow: inset 0 0 0 4px #dc2626;
      }
    }
  `}),c==="practice"?r.jsx(ut,{}):r.jsx(dt,{}),r.jsx("header",{className:"header-bar",children:r.jsxs("div",{className:"w-full px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"brand-cluster",children:[r.jsx("img",{src:"/logo.png",alt:"Davidson Science Bowl Logo",className:"w-8 h-8 rounded-lg"}),r.jsx("div",{className:"font-semibold tracking-tight",style:{color:"#550000"},children:"Davidson Science Bowl"})]}),r.jsxs("nav",{className:"flex items-center gap-2",children:[r.jsx(Nt,{active:c==="practice",onClick:()=>n("/practice"),children:"Practice"}),r.jsx("button",{onClick:()=>n("/round-generator"),className:"btn btn-top-maroon ","aria-pressed":c==="generate",children:"Round Generator"}),t?.user?.uid==="fkLJJ2R6HbdwqoXSxrLUybZ0IdH2"&&r.jsxs("button",{onClick:()=>{try{document.body.classList.add("admin-border-on"),document.documentElement.classList.add("admin-border-on")}catch{}n("/admin")},className:"btn inline-flex items-center gap-2 font-semibold text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500","aria-pressed":c==="admin",title:"Admin editor",children:[r.jsx(Ze,{size:18,className:"text-white"}),r.jsx("span",{className:"text-white",children:"Admin"})]}),r.jsx("div",{className:"ml-4",children:r.jsxs("div",{className:"relative inline-flex items-center group",children:[a!=="system"&&r.jsx("button",{type:"button",onClick:()=>{h.current=!0,d("system"),m(K("system"))},className:"mr-2 hidden group-hover:inline-flex items-center px-2 py-1 rounded text-xs border border-black/10 dark:border-white/20 bg-white/70 dark:bg-black/40 backdrop-blur-sm text-black dark:text-white hover:bg-white/90 dark:hover:bg-black/60 transition","aria-label":"Follow system theme",title:"Follow system",children:"Follow system"}),r.jsx(we,{checked:u,onChange:f=>{h.current=!0,d(f?"dark":"light"),m(f)}})]})}),r.jsx("div",{className:"ml-3",children:t.loading?r.jsx("div",{className:"text-sm opacity-70",children:"Loading…"}):t.user?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm opacity-80 max-w-[12rem] truncate",children:t.user.email||t.user.displayName}),r.jsx("button",{className:"btn btn-ghost",onClick:t.logout,children:"Logout"})]}):r.jsx(ge,{to:"/signin",className:"btn btn-primary",children:"Sign in"})})]})]})}),r.jsxs("main",{className:"w-full px-4 py-8 text-black dark:text-white",children:[e.loadingTournaments&&r.jsx("div",{className:"glass p-6",children:"Loading tournaments…"}),e.errorTournaments&&r.jsxs("div",{className:"glass p-6 text-red-600",children:["Failed to load tournaments: ",String(e.errorTournaments)]}),!e.loadingTournaments&&!e.errorTournaments&&r.jsx("div",{className:"space-y-6",children:r.jsx(g.Suspense,{fallback:r.jsx("div",{className:"glass p-6",children:"Loading…"}),children:c==="practice"?r.jsx(vt,{lazy:e}):c==="admin"?r.jsx(St,{auth:t}):r.jsx(Et,{lazy:e,auth:t,persistedGenerated:o,setPersistedGenerated:l,onNewRound:i})})})]}),r.jsxs("footer",{className:"w-full px-4 pb-8 text-center text-black/60 dark:text-white/60",children:[!1,r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{children:"Built with Firebase • Vite • Tailwind"}),r.jsxs("div",{className:"text-xs flex flex-wrap gap-2 justify-center","aria-label":"Legal and policy links",children:[r.jsx("a",{href:"/terms-of-service",className:"hover:underline focus:outline-none focus:ring-1 focus:ring-current",rel:"nofollow",children:"Terms of Service"}),r.jsx("span",{"aria-hidden":"true",children:"•"}),r.jsx("a",{href:"/privacy-policy",className:"hover:underline focus:outline-none focus:ring-1 focus:ring-current",rel:"nofollow",children:"Privacy Policy"})]})]})]})]})}function ne({children:e,dark:t,setDark:s}){return r.jsxs("div",{className:"min-h-screen app-radial-bg dark:app-radial-bg transition-colors glass-backdrop text-black dark:text-white flex flex-col items-center px-4 py-10",children:[r.jsxs("div",{className:"w-full max-w-md flex items-center justify-between mb-4 gap-2",children:[r.jsxs(ge,{to:"/round-generator",className:"inline-flex items-center gap-1 text-xs px-3 py-1 rounded-full border border-black/10 dark:border-white/20 hover:bg-black/5 dark:hover:bg-white/10 transition","aria-label":"Back to home",children:[r.jsx("span",{"aria-hidden":"true",className:"-ml-0.5 mr-0.5",children:"←"}),r.jsx(et,{size:14,"aria-hidden":"true"}),r.jsx("span",{children:"Home"})]}),r.jsx(we,{checked:t,onChange:s})]}),e]})}function At(){const e=xe(),[t,s]=_.useState(""),[n,o]=_.useState(""),[l,i]=_.useState(!1),[c,a]=_.useState(""),[d,u]=_.useState(!1),[m,h]=_.useState(""),[f,p]=_.useState(()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);_.useEffect(()=>{document.documentElement.classList.toggle("dark",f),f?document.body.classList.add("dark-bg"):document.body.classList.remove("dark-bg");let x=document.querySelector('meta[name="theme-color"]');x||(x=document.createElement("meta"),x.name="theme-color",document.head.appendChild(x)),x.setAttribute("content",f?"#000000":"#ffffff")},[f]);const w=/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t),y=n.length>=10,j=async()=>{if(a(""),!w){a("Enter a valid email.");return}if(!y){a("Password must be at least 10 characters.");return}i(!0);try{await e.loginWithEmail(t,n)}catch(x){const b=x?.code||"";a(b==="auth/invalid-credential"||b==="auth/wrong-password"||b==="auth/user-not-found"?"Wrong email or password.":b==="auth/too-many-requests"?"Too many attempts. Try again later.":b==="auth/invalid-email"?"Enter a valid email.":x?.message||"Login failed.")}finally{i(!1)}},D=async()=>{if(a(""),!w){a("Enter a valid email.");return}if(!y){a("Password isn’t safe. Use at least 10 characters.");return}i(!0);try{await e.signupWithEmail(t,n)}catch(x){const b=x?.code||"";a(b==="auth/email-already-in-use"?"That email already exists. Try signing in.":b==="auth/weak-password"?"Password isn’t safe. Use at least 10 characters.":b==="auth/invalid-email"?"Enter a valid email.":x?.message||"Sign up failed.")}finally{i(!1)}},B=async()=>{a(""),i(!0);try{await e.loginWithGoogle()}catch(x){const b=x?.code||"";a(b==="auth/popup-closed-by-user"?"Sign-in was canceled.":b==="auth/cancelled-popup-request"?"Another sign-in is already in progress.":x?.message||"Google sign-in failed.")}finally{i(!1)}};return e.user?r.jsx(ne,{dark:f,setDark:p,children:r.jsxs("div",{className:"mx-auto w-full max-w-md p-6 glass space-y-4",children:[r.jsxs("div",{className:"mb-3",children:["You’re signed in as ",r.jsx("strong",{children:e.user.email||e.user.displayName}),"."]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("a",{href:"/",className:"btn btn-primary",children:"Go to app"}),r.jsx("button",{className:"btn btn-ghost",onClick:e.logout,children:"Logout"})]})]})}):d?r.jsx(ne,{dark:f,setDark:p,children:r.jsxs("div",{className:"mx-auto w-full max-w-md p-6 glass space-y-4 flex flex-col items-center",children:[r.jsx("h1",{className:"text-xl font-semibold gradient-text",children:"Reset password"}),m&&r.jsx("div",{className:"rounded-lg border border-green-300/60 bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-200 dark:border-green-400/40 px-3 py-2 text-sm",children:m}),c&&r.jsx("div",{className:"rounded-lg border border-red-300/60 bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200 dark:border-red-400/40 px-3 py-2 text-sm",children:c}),r.jsx("input",{className:"w-full rounded-lg border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-2 py-2",placeholder:"Enter your email",type:"email",autoComplete:"email",value:t,onChange:x=>s(x.target.value)}),r.jsxs("div",{className:"flex flex-col items-center gap-2 w-full mt-2",children:[r.jsxs("button",{className:"btn btn-primary flex items-center justify-center gap-2 w-full",disabled:l||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t),onClick:async()=>{a(""),h(""),i(!0);try{await Ce($(),t),h("Password reset email sent, if you have an account with us! Check your inbox.")}catch(x){x?.code==="auth/user-not-found"?a("No account found for that email."):x?.code==="auth/invalid-email"?a("Enter a valid email."):a(x?.message||"Failed to send reset email.")}finally{i(!1)}},children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M22 2L11 13"}),r.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]}),"Send reset email"]}),r.jsxs("button",{className:"btn btn-ghost flex items-center justify-center gap-2 w-full",onClick:()=>{u(!1),a(""),h("")},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})]})]})}):r.jsx(ne,{dark:f,setDark:p,children:r.jsxs("div",{className:"mx-auto w-full max-w-md p-6 glass mt-0 space-y-4 flex flex-col items-center",children:[r.jsx(mt,{}),r.jsx("h1",{className:"text-xl font-semibold gradient-text",children:"Sign in"}),c&&r.jsx("div",{className:"rounded-lg border border-red-300/60 bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200 dark:border-red-400/40 px-3 py-2 text-sm",role:"alert","aria-live":"polite",children:c}),r.jsxs("button",{className:"btn btn-google w-full bg-white text-[#1f1f1f] border border-black/10 hover:bg-white/90 dark:bg-white dark:text-[#1f1f1f] dark:hover:bg-white/90 flex items-center justify-center text-base",style:{maxWidth:320,minHeight:48,paddingTop:8,paddingBottom:8},disabled:l,onClick:B,children:[r.jsx("span",{className:"google-icon",style:{width:28,height:28,marginRight:14,display:"flex",alignItems:"center",justifyContent:"center"},"aria-hidden":!0}),r.jsx("span",{style:{lineHeight:"28px"},children:"Sign in with Google"})]}),r.jsx("div",{className:"text-center opacity-60 text-sm",children:"or"}),r.jsx("input",{className:"w-full rounded-lg border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-2 py-2",placeholder:"email",type:"email",autoComplete:"email",value:t,onChange:x=>s(x.target.value)}),r.jsx("input",{className:"w-full rounded-lg border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-2 py-2",placeholder:"password",type:"password",autoComplete:"current-password",value:n,onChange:x=>o(x.target.value)}),r.jsxs("div",{className:"flex flex-col w-full mt-2 gap-2 items-center",children:[r.jsxs("div",{className:"flex gap-2 w-full justify-center",children:[r.jsxs("button",{className:"btn btn-fancy flex items-center justify-center gap-2 text-sm font-medium",disabled:l,onClick:j,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M12 5l7 7-7 7"})}),"Login"]}),r.jsxs("button",{className:"btn btn-orange flex items-center justify-center gap-2 text-sm font-medium hover-lift",disabled:l,onClick:D,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Sign up"]})]}),r.jsx("button",{className:"text-xs text-red-500 hover:underline focus:underline font-normal w-full mt-2 flex items-center justify-center gap-1 bg-transparent border-none p-0",type:"button",style:{cursor:"pointer"},onClick:()=>{u(!0),a(""),h("")},children:"Forgot password?"})]})]})})}const Lt=Ke([{path:"/",element:r.jsx(Ye,{to:"/round-generator",replace:!0})},{path:"/round-generator",element:r.jsx(se,{})},{path:"/practice",element:r.jsx(se,{})},{path:"/admin",element:r.jsx(se,{})},{path:"/signin",element:r.jsx(At,{})}]);Ee.createRoot(document.getElementById("root")).render(r.jsx(_.StrictMode,{children:r.jsx(Je,{children:r.jsx(wt,{children:r.jsx(Ve,{router:Lt})})})}));export{ie as _,Sr as a,Pr as b,jr as c,vr as d,Ar as e,Nr as f,L as g,kr as h,gt as i,Rr as j,Dr as k,yr as l,xr as m,br as n,Er as r,Lr as s,bt as u};
