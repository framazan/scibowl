import{c as N,i as j,r as st,l as w,h as Pt,j as kt}from"./vendor-react-pdf-fns-DIcDsgsD.js";import{c as L,d as At,e as J}from"./vendor-babel-runtime-WXw8LxeR.js";import{b as D}from"./vendor-bidi-js-DLACMwmw.js";import{e as $t}from"./vendor-unicode-properties-BbL32wKl.js";import{h as Et,p as Ct}from"./vendor-hyphen-B2aENclZ.js";var _t=function(t){var r=0,n="",e=[];return t.forEach(function(i){n+=i.string,e.push(L({},i,{start:r,end:r+i.string.length,attributes:i.attributes||{}})),r+=i.string.length}),{string:n,runs:e}},jt=function(t){return[t]},Ft=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),function(n){for(var e,i,a=[],u=[],o=r.hyphenationCallback||((e=(i=t).wordHyphenation)===null||e===void 0?void 0:e.call(i,r))||jt,v=0;v<n.runs.length;v+=1){for(var l="",c=n.runs[v],h=n.string.slice(c.start,c.end).split(/([ ]+)/g).filter(Boolean),d=0;d<h.length;d+=1){var f=h[d],g=o(f);a.push.apply(a,g),l+=g.join("")}u.push(L({},c,{string:l}))}return L({},_t(u),{syllables:a})}},Mt=function(t){return Object.assign({},t)},ut=function(t,r){var n=Object.assign({},t,{height:r}),e=Object.assign({},t,{y:t.y+r,height:t.height-r});return[n,e]},St=function(t,r){var n=ut(r,t),e=n[1];return e},Wt=function(t){return t.reduce(function(r,n){return r+n.box.height},0)},Tt=function(t){var r,n=t.attributes||{},e=n.fontSize||12,i=(r=n.font)===null||r===void 0?void 0:r.unitsPerEm;return i?e/i:0},A=function(t){var r;return((r=t.attributes)===null||r===void 0?void 0:r.scale)||Tt(t)},Z=function(t,r){if(!r)return 0;var n=r.glyphIndices||[],e=n[t];return n.slice(0,t).filter(function(i){return i===e}).length},B=function(t){var r;return((r=t.attributes)===null||r===void 0?void 0:r.font)||null},q=function(t,r,n,e){if(!e)return[];if(t===r)return[];if(t===0&&r===e.codePoints.length)return[e];var i=e.codePoints.slice(t,r),a=String.fromCodePoint.apply(String,i);return n?n.layout(a,void 0,void 0,void 0,"ltr").glyphs:[e]},W=function(t,r){var n,e=r==null||(n=r.glyphIndices)===null||n===void 0?void 0:n[t];return j(e)?t:e},ot=function(t){var r=t[0];return t.map(function(n){return n-r})},_=function(t,r,n){var e,i,a=A(n),u=B(n),o=W(t,n),v=W(r,n),l=(e=n.glyphs)===null||e===void 0?void 0:e[o],c=(i=n.glyphs)===null||i===void 0?void 0:i[v],h=Z(t,n),d=h>0?q(h,1/0,u,l):[],f=Z(r,n),g=q(0,f,u,c),p=o+Math.min(1,h),y=(n.glyphs||[]).slice(p,v),x=function(E){return{xAdvance:E.advanceWidth*a}},m=d.map(x),b=(n.positions||[]).slice(p,v),I=g.map(x);return Object.assign({},n,{start:n.start+t,end:Math.min(n.end,n.start+r),glyphIndices:ot((n.glyphIndices||[]).slice(t,r)),glyphs:[d,y,g].flat(),positions:[m,b,I].flat()})},G=function(t,r){return r?r.findIndex(function(n){return n.start<=t&&t<n.end}):-1},vt=function(t,r,n){var e=G(t,n),i=Math.max(G(r-1,n),e);return n.slice(e,i+1)},Ht=function(t,r){var n=r.start-t,e=r.end-t;return Object.assign({},r,{start:n,end:e})},zt=function(t,r,n){var e=function(u){return _(t-u.start,r-u.start,u)},i=function(u){return _(0,r-u.start,u)};return n.map(function(a,u){var o=a,v=u===0,l=!v&&u===n.length-1;return v&&(o=e(a)),l&&(o=i(a)),Ht(t,o)})},k=function(t,r,n){if(n.string.length===0)return n;var e=n.string.slice(t,r),i=vt(t,r,n.runs),a=zt(t,r,i);return Object.assign({},n,{string:e,runs:a})},Nt=function(t){return t.search(/\S/g)},Gt=function(t){var r=t.match(/\S/g);return r?t.lastIndexOf(r[r.length-1]):-1},Dt=function(t){var r=Nt(t.string),n=Gt(t.string);return k(r,n+1,t)},Bt=function(){return{start:0,end:0,glyphIndices:[],glyphs:[],positions:[],attributes:{}}},lt=function(t){return typeof t=="number"},Yt=function(t,r){var n=w(r),e=j(n)?0:n+1,i=Array(t).fill(e);return r.concat(i)},ct=function(t,r){return r&&t?r.glyphForCodePoint(t):null},Ut=function(t,r){var n,e=((n=t.codePoints)===null||n===void 0?void 0:n.length)||0,i=r.end+e,a=r.glyphs.concat(t),u=Yt(e,r.glyphIndices);if(!r.positions)return Object.assign({},r,{end:i,glyphs:a,glyphIndices:u});var o=r.positions.concat({xAdvance:t.advanceWidth*A(r)});return Object.assign({},r,{end:i,glyphs:a,glyphIndices:u,positions:o})},ft=function(t,r){if(!t)return r;var n=B(r),e=lt(t)?ct(t,n):t;return Ut(e,r)},ht=function(t){return String.fromCodePoint.apply(String,t||[])},dt=function(t,r){var n=t?.codePoints||[],e=ht(n),i=r.string+e,a=r.runs.slice(0,-1),u=w(r.runs)||Bt(),o=a.concat(ft(t,u));return Object.assign({},r,{string:i,runs:o})},pt=8230,Kt=String.fromCharCode(pt),Xt=function(t){if(!t.encode)return pt;var r=t.encode(Kt),n=r[0];return parseInt(n[0],16)},Q=function(t){var r,n,e,i=((r=w(t))===null||r===void 0?void 0:r.runs)||[],a=(n=w(i))===null||n===void 0||(e=n.attributes)===null||e===void 0?void 0:e.font;if(a){var u,o=t.length-1,v=Xt(a),l=a.glyphForCodePoint(v),c=dt(l,Dt(t[o]));return Object.assign([],t,(u={},u[o]=c,u))}return t},gt=function(t,r){var n=Object.assign({},r.attributes);return delete n[t],Object.assign({},r,{attributes:n})},T=function(t){var r,n,e,i,a=((r=t.attributes)===null||r===void 0||(n=r.attachment)===null||n===void 0?void 0:n.height)||0,u=((e=t.attributes)===null||e===void 0||(i=e.font)===null||i===void 0?void 0:i.ascent)||0;return Math.max(a,u*A(t))},yt=function(t){var r,n,e=((r=t.attributes)===null||r===void 0||(n=r.font)===null||n===void 0?void 0:n.descent)||0;return A(t)*e},Jt=function(t){var r,n;return(((r=t.attributes)===null||r===void 0||(n=r.font)===null||n===void 0?void 0:n.lineGap)||0)*A(t)},mt=function(t){var r,n=(r=t.attributes)===null||r===void 0?void 0:r.lineHeight;return n||Jt(t)+T(t)-yt(t)},bt=function(t){var r=function(e,i){return Math.max(e,mt(i))};return t.runs.reduce(r,0)},Zt=function(t,r){var n=Math.max(t.x,r.x),e=Math.min(t.x+t.width,r.x+r.width),i=Math.max(t.y,r.y),a=Math.min(t.y+t.height,r.y+r.height);return e>=n&&a>=i},qt=["excludeRects"],Qt=function(t,r){if(!Zt(r,t))return[t];var n=r.x,e=r.x+r.width,i=t.x,a=t.x+t.width,u=Object.assign({},t,{width:n-i}),o=Object.assign({},t,{x:e,width:a-e});return[u,o].filter(function(v){return v.width>0})},Vt=function(t,r){for(var n=[t],e=function(){var u=r[i];n=n.reduce(function(o,v){var l=Qt(v,u);return o.concat(l)},[])},i=0;i<r.length;i+=1)e();return n},tr=function(t,r){var n=t.excludeRects,e=At(t,qt);if(!n)return[e];for(var i=[],a=Math.max.apply(Math,n.map(function(h){return h.y+h.height})),u=e;u.y<a;){var o=ut(u,r),v=o[0],l=o[1],c=Vt(v,n);u=l,i.push.apply(i,c)}return[].concat(i,[u])},rr="￼",nr=function(t){var r=!t.string.includes(rr);if(!r)return t;var n=t.runs.map(function(e){return gt("attachment",e)});return Object.assign({},t,{runs:n})},er=function(t,r,n){var e=t.shift(),i=e.y;return r.map(function(a,u){var o,v,l=u===0?n:0,c=((o=a.runs)===null||o===void 0||(v=o[0])===null||v===void 0?void 0:v.attributes)||{},h=Math.max(bt(a),c.lineHeight);i+h>e.y+e.height&&t.length>0&&(e=t.shift(),i=e.y);var d=Object.assign({},a);return delete d.syllables,d.box={x:e.x+l,y:i,width:e.width-l,height:h},i+=h,nr(d)})},ir=function(t,r){return function(n,e){var i,a,u,o=bt(e),v=((i=e.runs)===null||i===void 0||(a=i[0])===null||a===void 0||(u=a.attributes)===null||u===void 0?void 0:u.indent)||0,l=tr(n,o),c=l.map(function(d){return d.width});c[0]-=v;var h=t.linebreaker(r)(e,c);return er(l,h,v)}},ar=function(t,r){for(var n=[],e=0,i=0;i<r.length;i+=1){var a=r[i];if(e+=a.box.height,e<t)n.push(a);else break}return n},sr=function(t,r,n){return function(e){for(var i=[],a=[].concat(e),u=ir(t,r),o=j(n.maxLines)?1/0:n.maxLines,v=n.truncateMode==="ellipsis",l=o,c=Mt(n),h=a.shift();l>0&&h;){var d=u(c,h),f=d.slice(0,l),g=Wt(f),p=v&&d.length!==f.length;if(l-=f.length,c.height>=g)i.push(p?Q(f):f),c=St(g,c),h=a.shift();else{i.push(Q(ar(c.height,f)));break}}return i}},ur=function(t){var r=t.runs;return r.length===0?0:r[0].start},or=function(t){var r=t.runs;return r.length===0?0:w(r).end},xt=function(t){return or(t)-ur(t)},V=D(),vr=function(t){return t.reduce(function(r,n){var e=n.end-n.start,i=st(n.attributes.bidiLevel,e);return r.concat(i)},[])},lr=function(t,r){for(var n=[],e=0;e<t.length;e+=1)n[e]=e;return r.forEach(function(i){for(var a=i[0],u=i[1],o=n.slice(a,u+1),v=o.length-1;v>=0;v-=1)n[u-v]=o[v]}),n},tt=function(t,r,n){for(var e=0;e<t.length;e+=1){var i=t[e],a=i.glyphIndices[n-i.start];if(n>=i.start&&n<i.end)return i[r][a]}throw new Error("index "+n+" out of range")},cr=function(t){var r,n=vr(t.runs),e=(r=t.runs[0])===null||r===void 0?void 0:r.attributes.direction,i=e==="rtl"?1:0,a=xt(t)-1,u=[{start:0,end:a,level:i}],o={paragraphs:u,levels:n},v=V.getReorderSegments(t.string,o);if(v.length===0)return t;var l=lr(t.string,v),c=V.getReorderedString(t.string,o),h=t.runs.map(function(d){for(var f=l.slice(d.start,d.end),g=[],p=[],y=new Set,x=0;x<f.length;x+=1){var m=f[x],b=tt(t.runs,"glyphs",m);y.has(b.id)||(g.push(b),p.push(tt(t.runs,"positions",m)),b.isLigature&&y.add(b.id))}return L({},d,{glyphs:g,positions:p})});return L({},t,{runs:h,string:c})},fr=function(t){return t.map(cr)},hr=function(){return function(t){return t.map(fr)}},dr=123,pr=function(t){return t===void 0&&(t=[]),t.reduce(function(r,n){var e=n?.codePoints||[dr];if(r.length===0)return e.map(function(){return 0});var i=r[r.length-1],a=e.map(function(){return i+1});return[].concat(r,a)},[])},gr=function(t){var r;return((r=t.attributes)===null||r===void 0?void 0:r.characterSpacing)||0},yr=function(t,r){var n=A(t),e=gr(t);return r.map(function(i,a){var u=a===r.length,o=u?0:e;return Object.assign({},i,{xAdvance:i.xAdvance*n+o,yAdvance:i.yAdvance*n,xOffset:i.xOffset*n,yOffset:i.yOffset*n})})},mr=function(t){return function(r){var n=r.start,e=r.end,i=r.attributes,a=i===void 0?{}:i,u=a.font;if(!u)return L({},r,{glyphs:[],glyphIndices:[],positions:[]});var o=t.slice(n,e),v=u.layout(o,void 0,void 0,void 0,"ltr"),l=yr(r,v.positions),c=pr(v.glyphs);return L({},r,{positions:l,glyphIndices:c,glyphs:v.glyphs})}},br=function(){return function(t){var r=t.runs.map(mr(t.string));return Object.assign({},t,{runs:r})}},xr=function(t){var r,n,e;if(!t.positions)return t;var i=((r=t.attributes)===null||r===void 0||(n=r.font)===null||n===void 0?void 0:n.unitsPerEm)||0,a=(((e=t.attributes)===null||e===void 0?void 0:e.yOffset)||0)*i,u=t.positions.map(function(o){return Object.assign({},o,{yOffset:a})});return Object.assign({},t,{positions:u})},Or=function(){return function(t){var r=t.runs.map(xr);return Object.assign({},t,{runs:r})}},Ir=function(t){return t.sort(function(r,n){return r.start-n.start||r.end-n.end})},rt=function(t){return t.start===t.end},wr=function(t,r){return t[1]-r[1]||t[3]-r[3]},Lr=function(t){var r=t.reduce(function(n,e,i){return n.concat([["start",e.start,e.attributes,i],["end",e.end,e.attributes,i]])},[]);return r.sort(wr)},Rr=function(t){return t.reduce(function(r,n){var e=Object.assign({},r.attributes,n.attributes);return Object.assign({},n,{attributes:e})},{})},Pr=function(t){var r=t.reduce(function(n,e){return n[e.start]||(n[e.start]=[]),n[e.start].push(e),n},[]);return Object.values(r)},kr=function(t){return Pr(t).map(Rr)},Ar=function(t){for(var r=[],n=Lr(t),e=-1,i={},a=[],u=0;u<n.length;u+=1){var o=n[u],v=o[0],l=o[1],c=o[2];if(e!==-1&&e<l&&r.push({start:e,end:l,attributes:i}),v==="start")a.push(c),i=Object.assign({},i,c);else{i={};for(var h=0;h<a.length;h+=1)a[h]===c?a.splice(h--,1):i=Object.assign({},i,a[h])}e=l}return r},$r=function(t){t===void 0&&(t=[]);var r=kr(t.filter(function(e){return rt(e)})),n=Ar(t.filter(function(e){return!rt(e)}));return Ir(r.concat(n))},Ot=function(){return{string:"",runs:[]}},Er=function(t){var r=t.runs.map(function(n){return gt("font",n)});return Object.assign({},t,{runs:r})},Cr=function(t,r){return function(n){if(j(n))return Ot();var e=n.string,i=t.fontSubstitution,a=t.scriptItemizer,u=t.bidi,o=Er(n),v=o.runs,l=a(r)(n),c=l.runs,h=i(r)(n),d=h.runs,f=u(r)(n),g=f.runs,p=g.concat(d).concat(c).concat(v);return{string:e,runs:$r(p)}}},_r=function(){return function(t){for(var r=[],n=0,e=t.string.indexOf(`
`)+1;e>0;)r.push(k(n,e,t)),n=e,e=t.string.indexOf(`
`,e)+1;return n===0?r.push(t):n<t.string.length&&r.push(k(n,xt(t),t)),r}},It=function(t){return t.reduce(function(r,n){return r+(n.xAdvance||0)},0)},Y=function(t){return It(t.positions||[])},U=function(t){var r=function(e,i){return e+Y(i)};return t.runs.reduce(r,0)},jr=32,K=function(t){var r=t?.codePoints||[];return r.includes(jr)},Fr=function(t){var r=t.glyphs||[],n=t.positions||[],e=r.findIndex(function(i){return!K(i)});return n.slice(0,e)},Mr=function(t){var r=Fr(t);return r.reduce(function(n,e){return n+(e.xAdvance||0)},0)},Sr=function(t){var r=t.runs||[];return Mr(r[0])},nt=function(t){return[].concat(t).reverse()},Wr=function(t){var r=nt(t.glyphs||[]),n=nt(t.positions||[]),e=r.findIndex(function(i){return!K(i)});return n.slice(0,e)},Tr=function(t){var r=Wr(t);return r.reduce(function(n,e){return n+(e.xAdvance||0)},0)},Hr=function(t){var r=t.runs||[];return Tr(w(r))},zr=function(t){return _(0,t.end-t.start-1,t)},Nr=function(t){var r=Pt(t.string),n=kt(-1,zr,t.runs);return Object.assign({},t,{string:r,runs:n})},Gr={center:.5,right:1},Dr=function(t){return w(t.string)===`
`?Nr(t):t},Br=function(t){return Sr(t)+(t.overflowLeft||0)},Yr=function(t){return Hr(t)+(t.overflowRight||0)},Ur=function(t){var r=Br(t),n=Yr(t),e=t.box.x-r,i=t.box.width+r+n,a=Object.assign({},t.box,{x:e,width:i});return Object.assign({},t,{box:a,overflowLeft:r,overflowRight:n})},Kr=function(t,r,n){return function(e){var i=U(e),a=Gr[n]||0,u=Math.max(0,e.box.width-i),o=n==="justify"||i>e.box.width,v=e.box.x+u*a,l=Object.assign({},e.box,{x:v}),c=Object.assign({},e,{box:l});return o?t.justification(r)(c):c}},Xr=function(t){var r=0,n=0,e=0,i=0,a=t.runs.map(function(u){var o=mt(u),v=T(u),l=yt(u),c=Y(u);return e=Math.max(e,o),r=Math.max(r,v),n=Math.max(n,l),i+=c,Object.assign({},u,{height:o,ascent:v,descent:l,xAdvance:c})});return Object.assign({},t,{runs:a,height:e,ascent:r,descent:n,xAdvance:i})},Jr=function(t,r){return t===void 0&&(t={}),function(n,e,i){var a,u,o=e===i.length-1,v=((a=n.runs)===null||a===void 0||(u=a[0])===null||u===void 0?void 0:u.attributes)||{},l=o?v.alignLastLine:v.align;return N(Xr,t.textDecoration(r),Kr(t,r,l),Ur,Dr)(n)}},Zr=function(t,r){return function(n){var e=Jr(t,r);return n.map(function(i){return i.map(e)})}},qr=65532,Qr=function(t){return t.codePoints.includes(qr)},Vr=function(t){var r;if(!t.positions)return t;var n=t.glyphs||[],e=((r=t.attributes)===null||r===void 0?void 0:r.attachment)||{},i=t.positions.map(function(a,u){var o=n[u];return e&&e.width&&Qr(o)?Object.assign({},a,{xAdvance:e.width}):Object.assign({},a)});return Object.assign({},t,{positions:i})},tn=function(){return function(t){var r=t.runs.map(Vr);return Object.assign({},t,{runs:r})}},rn=function(t){return{align:t.align||(t.direction==="rtl"?"right":"left"),alignLastLine:t.alignLastLine||(t.align==="justify"?"left":t.align||"left"),attachment:t.attachment||null,backgroundColor:t.backgroundColor||null,bullet:t.bullet||null,characterSpacing:t.characterSpacing||0,color:t.color||"black",direction:t.direction||"ltr",features:t.features||[],fill:t.fill!==!1,font:t.font||null,fontSize:t.fontSize||12,hangingPunctuation:t.hangingPunctuation||!1,hyphenationFactor:t.hyphenationFactor||0,indent:t.indent||0,justificationFactor:t.justificationFactor||1,lineHeight:t.lineHeight||null,lineSpacing:t.lineSpacing||0,link:t.link||null,marginLeft:t.marginLeft||t.margin||0,marginRight:t.marginRight||t.margin||0,opacity:t.opacity,paddingTop:t.paddingTop||t.padding||0,paragraphSpacing:t.paragraphSpacing||0,script:t.script||null,shrinkFactor:t.shrinkFactor||0,strike:t.strike||!1,strikeColor:t.strikeColor||t.color||"black",strikeStyle:t.strikeStyle||"solid",stroke:t.stroke||!1,underline:t.underline||!1,underlineColor:t.underlineColor||t.color||"black",underlineStyle:t.underlineStyle||"solid",verticalAlign:t.verticalAlign||null,wordSpacing:t.wordSpacing||0,yOffset:t.yOffset||0}},nn=function(t){var r=rn(t.attributes);return Object.assign({},t,{attributes:r})},en=function(){return function(t){var r=t.string||"",n=(t.runs||[]).map(nn);return{string:r,runs:n}}},an=function(){return function(t){return t.runs.forEach(function(r){var n=r.attributes,e=n.verticalAlign;e==="sub"?n.yOffset=-.2:e==="super"&&(n.yOffset=.4)}),t}},sn=D(),un=function(t){return t.reduce(function(r,n){var e=n.end-n.start,i=st(n.attributes.bidiLevel,e);return r.concat(i)},[])},on=function(){return function(t){var r=un(t.runs),n="";return t.string.split("").forEach(function(e,i){var a=r[i]%2===1,u=a?sn.getMirroredCharacter(t.string.charAt(i)):null;n+=u||e}),L({},t,{string:n,levels:r})}},Xn=function(t){return function(r,n,e){e===void 0&&(e={});var i=N(Or(),tn(),an(),Ft(t,e),br(),on(),Cr(t,e)),a=function(o){return o.map(i)};return N(Zr(t,e),hr(),sr(t,e,n),a,_r(),en())(r)}},vn=D(),Jn=function(){return function(t){for(var r,n=t.string,e=(r=t.runs[0])===null||r===void 0?void 0:r.attributes.direction,i=vn.getEmbeddingLevels(n,e),a=i.levels,u=null,o=0,v=0,l=[],c=0;c<a.length;c+=1){var h=a[c];h!==u&&(u!==null&&l.push({start:o,end:v,attributes:{bidiLevel:u}}),o=v,u=h),v+=1}return o<n.length&&l.push({start:o,end:n.length,attributes:{bidiLevel:u}}),{string:n,runs:l}}},et=1e4,ln=function(t,r,n){for(var e=null,i=1/0,a={width:0,stretch:0,shrink:0},u=r[Math.min(n,r.length-1)],o=function(p){return a.width<u?a.stretch-p.stretch>0?(u-a.width)/a.stretch:et:a.width>u?a.shrink-p.shrink>0?(u-a.width)/a.shrink:et:0},v=0;v<t.length;v+=1){var l=t[v];if(l.type==="box"?a.width+=l.width:l.type==="glue"&&(a.width+=l.width,a.stretch+=l.stretch,a.shrink+=l.shrink),a.width-a.shrink>u){if(e===null){for(var c=v===0?v+1:v;c<t.length&&(t[c].type==="glue"||t[c].type==="penalty");)c++;e=c-1}break}if(l.type==="penalty"||l.type==="glue"){var h=o(l),d=l.type==="penalty"?l.penalty:0,f=100*Math.pow(Math.abs(h),3)+d;i>=f&&(e=v,i=f)}}return a.width-a.shrink>u?e:null},cn=function(t,r){for(var n=0,e=0,i=t,a=[{position:0}];i.length>0;){var u=ln(i,r,e);u!==null?(n+=u,a.push({position:n}),i=i.slice(u+1,i.length),n++,e++):i=[]}return a},fn=(function(){function s(r){this.prev=null,this.next=null,this.data=r}var t=s.prototype;return t.toString=function(){return this.data.toString()},s})(),S=(function(){function s(){this.head=null,this.tail=null,this.listSize=0,this.listLength=0}var t=s.prototype;return t.isLinked=function(n){return!(n&&n.prev===null&&n.next===null&&this.tail!==n&&this.head!==n||this.isEmpty())},t.size=function(){return this.listSize},t.isEmpty=function(){return this.listSize===0},t.first=function(){return this.head},t.last=function(){return this.last},t.toString=function(){return this.toArray().toString()},t.toArray=function(){for(var n=this.head,e=[];n!==null;)e.push(n),n=n.next;return e},t.forEach=function(n){for(var e=this.head;e!==null;)n(e),e=e.next},t.contains=function(n){var e=this.head;if(!this.isLinked(n))return!1;for(;e!==null;){if(e===n)return!0;e=e.next}return!1},t.at=function(n){var e=this.head,i=0;if(n>=this.listLength||n<0)return null;for(;e!==null;){if(n===i)return e;e=e.next,i+=1}return null},t.insertAfter=function(n,e){return this.isLinked(n)?(e.prev=n,e.next=n.next,n.next===null?this.tail=e:n.next.prev=e,n.next=e,this.listSize+=1,this):this},t.insertBefore=function(n,e){return this.isLinked(n)?(e.prev=n.prev,e.next=n,n.prev===null?this.head=e:n.prev.next=e,n.prev=e,this.listSize+=1,this):this},t.push=function(n){return this.head===null?this.unshift(n):this.insertAfter(this.tail,n),this},t.unshift=function(n){return this.head===null?(this.head=n,this.tail=n,n.prev=null,n.next=null,this.listSize+=1):this.insertBefore(this.head,n),this},t.remove=function(n){return this.isLinked(n)?(n.prev===null?this.head=n.next:n.prev.next=n.next,n.next===null?this.tail=n.prev:n.next.prev=n.prev,this.listSize-=1,this):this},t.pop=function(){var n=this.tail;return this.tail.prev.next=null,this.tail=this.tail.prev,this.listSize-=1,n.prev=null,n.next=null,n},t.shift=function(){var n=this.head;return this.head.next.prev=null,this.head=this.head.next,this.listSize-=1,n.prev=null,n.next=null,n},s})();S.Node=fn;/**
 * @param {Object[]} nodes
 * @param {number[]} lines
 * @param {Object} settings
 * @preserve Knuth and Plass line breaking algorithm in JavaScript
 *
 * Licensed under the new BSD License.
 * Copyright 2009-2010, Bram Stein
 * All rights reserved.
 */var O=function s(t,r,n){var e={demerits:{line:n&&n.demerits&&n.demerits.line||10,flagged:n&&n.demerits&&n.demerits.flagged||100,fitness:n&&n.demerits&&n.demerits.fitness||3e3},tolerance:n&&n.tolerance||3},i=new S,a={width:0,stretch:0,shrink:0},u=r,o=[],v={data:{demerits:1/0}};function l(f,g,p,y,x,m,b){return{position:f,demerits:g,ratio:p,line:y,fitnessClass:x,totals:m||{width:0,stretch:0,shrink:0},previous:b}}function c(f,g,p,y){var x=a.width-p.totals.width,m=0,b=0,I=y<u.length?u[y-1]:u[u.length-1];return t[g].type==="penalty"&&(x+=t[g].width),x<I?(m=a.stretch-p.totals.stretch,m>0?(I-x)/m:s.infinity):x>I?(b=a.shrink-p.totals.shrink,b>0?(I-x)/b:s.infinity):0}function h(f){for(var g={width:a.width,stretch:a.stretch,shrink:a.shrink},p=f;p<t.length;p+=1)if(t[p].type==="glue")g.width+=t[p].width,g.stretch+=t[p].stretch,g.shrink+=t[p].shrink;else if(t[p].type==="box"||t[p].type==="penalty"&&t[p].penalty===-s.infinity&&p>f)break;return g}function d(f,g,p){for(var y=i.first(),x=null,m=0,b=0,I=[],$,E=0,X,R=0,C,P,H;y!==null;){for(I=[{demerits:1/0},{demerits:1/0},{demerits:1/0},{demerits:1/0}];y!==null&&(x=y.next,E=y.data.line+1,m=c(y.data.position,g,y.data,E),(m<-1||f.type==="penalty"&&f.penalty===-s.infinity)&&i.remove(y),m>=-1&&m<=e.tolerance&&($=100*Math.pow(Math.abs(m),3),f.type==="penalty"&&f.penalty>=0?b=Math.pow(e.demerits.line+$,2)+Math.pow(f.penalty,2):f.type==="penalty"&&f.penalty!==-s.infinity?b=Math.pow(e.demerits.line+$,2)-Math.pow(f.penalty,2):b=Math.pow(e.demerits.line+$,2),f.type==="penalty"&&p[y.data.position].type==="penalty"&&(b+=e.demerits.flagged*f.flagged*p[y.data.position].flagged),m<-.5?R=0:m<=.5?R=1:m<=1?R=2:R=3,Math.abs(R-y.data.fitnessClass)>1&&(b+=e.demerits.fitness),b+=y.data.demerits,b<I[R].demerits&&(I[R]={active:y,demerits:b,ratio:m})),y=x,!(y!==null&&y.data.line>=E)););for(X=h(g),C=0;C<I.length;C+=1)P=I[C],P.demerits<1/0&&(H=new S.Node(l(g,P.demerits,P.ratio,P.active.data.line+1,C,X,P.active)),y!==null?i.insertBefore(y,H):i.push(H))}}if(i.push(new S.Node(l(0,0,0,0,0,void 0,null))),t.forEach(function(f,g,p){f.type==="box"?a.width+=f.width:f.type==="glue"?(g>0&&p[g-1].type==="box"&&d(f,g,p),a.width+=f.width,a.stretch+=f.stretch,a.shrink+=f.shrink):f.type==="penalty"&&f.penalty!==s.infinity&&d(f,g,p)}),i.size()!==0){for(i.forEach(function(f){f.data.demerits<v.data.demerits&&(v=f)});v!==null;)o.push({position:v.data.position,ratio:v.data.ratio}),v=v.data.previous;return o.reverse()}return[]};O.infinity=1e4;O.glue=function(s,t,r,n){return{type:"glue",value:t,width:s,stretch:r,shrink:n}};O.box=function(s,t,r){return r===void 0&&(r=!1),{type:"box",width:s,value:t,hyphenated:r}};O.penalty=function(s,t,r){return{type:"penalty",width:s,penalty:t,flagged:r}};var hn=function(t,r){var n=r.start+t,e=r.end+t;return Object.assign({},r,{start:n,end:e})},dn=function(t){return t.end-t.start},pn=function(t,r){var n=t.end+dn(r),e=(t.glyphs||[]).concat(r.glyphs||[]),i=(t.positions||[]).concat(r.positions||[]),a=Object.assign({},t.attributes,r.attributes),u=t.glyphIndices||[],o=w(u)||0,v=(r.glyphIndices||[]).map(function(c){return c+o+1}),l=ot(u.concat(v));return Object.assign({},t,{end:n,glyphs:e,positions:i,attributes:a,glyphIndices:l})},gn=function(t,r,n){if(!r)return n;var e=_(0,t,n),i=_(t,1/0,n);return pn(ft(r,e),i)},yn=function(t,r,n){var e=B(n),i=lt(r)?ct(r,e):r;return gn(t,i,n)},mn=function(t,r){return G(t,r.runs)},bn=function(t,r,n){var e=mn(t,n);if(e===-1)return dt(r,n);var i=r.codePoints||[],a=n.string.slice(0,t)+ht(i)+n.string.slice(t),u=n.runs.map(function(o,v){return v===e?yn(t-o.start,r,o):v>e?hn(i.length,o):o});return Object.assign({},n,{string:a,runs:u})},xn=function(t,r,n){var e=n.start||0,i=Math.max(0,W(t-e,n)),a=Math.max(0,W(r-e,n)),u=(n.positions||[]).slice(i,a);return It(u)},On=function(t,r,n){var e=vt(t,r,n.runs);return e.reduce(function(i,a){return i+xn(t,r,a)},0)},In=45,wn=5,Ln=50,F={width:3,stretch:6,shrink:9},Rn=function(t,r,n){var e=0,i=null,a=n.reduce(function(u,o){var v=r[o.position],l=r[o.position-1];if(o.position===r.length-1)return u;var c;return v.type==="penalty"?(i=l.value.end,c=k(e,i,t),c=bn(c.length,In,c)):(i=v.value.end,c=k(e,i,t)),e=i,[].concat(u,[c])},[]);return a.push(k(e,t.string.length,t)),a},Pn=function(t,r,n){var e=r.align,i=0,a=5,u=t.syllables,o=n.hyphenationPenalty||(e==="justify"?100:600),v=u.reduce(function(l,c,h){var d=On(i,i+c.length,t);if(c.trim()===""){var f=d*F.width/F.stretch,g=d*F.width/F.shrink,p={start:i,end:i+c.length};l.push(O.glue(d,p,f,g))}else{var y=u[h+1]!==" ",x={start:i,end:i+c.length};l.push(O.box(d,x,y)),u[h+1]&&y&&l.push(O.penalty(a,o,1))}return i+=c.length,l},[]);return v.push(O.glue(0,null,O.infinity,0)),v.push(O.penalty(0,-O.infinity,1)),v},kn=function(t){var r,n;return((r=t.runs)===null||r===void 0||(n=r[0])===null||n===void 0?void 0:n.attributes)||{}},Zn=function(t){return function(r,n){for(var e=t.tolerance||4,i=kn(r),a=Pn(r,i,t),u=O(a,n,{tolerance:e});u.length===0&&e<Ln;)e+=wn,u=O(a,n,{tolerance:e});return(u.length===0||u.length===1&&u[0].position===0)&&(u=cn(a,n)),Rn(r,a,u.slice(1))}},wt=1,Lt=2,An={before:.5,after:.5,priority:wt,unconstrained:!1},$n={before:.14453125,after:.14453125,priority:Lt,unconstrained:!1},En={before:-.04296875,after:-.04296875,priority:wt,unconstrained:!1},Cn={before:-.04296875,after:-.04296875,priority:Lt,unconstrained:!1},_n=function(t,r){var n=r.expandCharFactor||{},e=r.shrinkCharFactor||{};return t==="GROW"?Object.assign({},$n,n):Object.assign({},Cn,e)},jn=function(t,r){var n=r.expandWhitespaceFactor||{},e=r.shrinkWhitespaceFactor||{};return t==="GROW"?Object.assign({},An,n):Object.assign({},En,e)},Fn=function(t,r){return function(n){for(var e=_n(t,r),i=jn(t,r),a=[],u=0;u<n.length;u+=1){var o=void 0,v=n[u];K(v)?(o=Object.assign({},i),u===n.length-1&&(o.before=0,u>0&&(a[u-1].after=0))):v.isMark&&u>0?(o=Object.assign({},a[u-1]),o.before=0,a[u-1].after=0):o=Object.assign({},e),a.push(o)}return a}},Mn=function(t,r,n){var e=t>0?"GROW":"SHRINK",i=Fn(e,n),a=r.runs.reduce(function(u,o){return u.concat(i(o.glyphs))},[]);return a[0].before=0,a[a.length-1].after=0,a},it=0,z=3,Sn=function(t,r){for(var n=0,e=[],i=[],a=it;a<=z;a+=1)e[a]=i[a]=0;for(var u=0;u<r.length;u+=1){var o=r[u],v=o.before+o.after;n+=v,e[o.priority]+=v,o.unconstrained&&(i[o.priority]+=v)}var l=-1,c=0,h=t,d;for(d=it;d<=z;d+=1){var f=e[d];if(f!==0){if(l===-1&&(l=d,c=f),Math.abs(h)<=Math.abs(f)){e[d]=h/f,i[d]=0,h=0;break}if(e[d]=1,h-=f,i[d]!==0){i[d]=h/i[d],h=0;break}}}for(var g=d+1;g<=z;g+=1)e[g]=0,i[g]=0;h>0&&l>-1&&(e[l]=(c+(t-n))/c);for(var p=[],y=0;y<r.length;y+=1){var x=r[y],m=r[y+1],b=x.after*e[x.priority];m&&(b+=m.before*e[m.priority]),x.unconstrained&&(b+=x.after*i[x.priority],m&&(b+=m.before*i[m.priority])),p.push(b)}return p},Wn=function(t,r){for(var n=0,e=J(r.runs),i;!(i=e()).done;)for(var a=i.value,u=J(a.positions),o;!(o=u()).done;){var v=o.value;v.xAdvance+=t[n++]}return r},qn=function(t){return function(r){var n=r.box.width-U(r);if(n!==0){var e=Mn(n,r,t),i=Sn(n,e);return Wn(i,r)}}},at=function(t){var r=function(e,i){return Math.max(e,T(i))};return t.runs.reduce(r,0)},Tn=12,Qn=function(){return function(t){var r=t.overflowLeft||0,n=t.overflowRight||0,e=U(t)-n;t.decorationLines=[];for(var i=0;i<t.runs.length;i+=1){var a=t.runs[i],u=Math.min(e-r,Y(a)),o=Math.max(.5,Math.floor(a.attributes.fontSize/Tn));if(a.attributes.underline){var v={x:r,y:at(t)+o*2,width:u,height:o},l={rect:v,opacity:a.attributes.opacity,color:a.attributes.underlineColor||"black",style:a.attributes.underlineStyle||"solid"};t.decorationLines.push(l)}if(a.attributes.strike){var c=at(t)-T(a)/3,h={x:r,y:c,width:u,height:o},d={rect:h,opacity:a.attributes.opacity,color:a.attributes.strikeColor||"black",style:a.attributes.strikeStyle||"solid"};t.decorationLines.push(d)}r+=u}return t}},Hn=["Common","Inherited","Unknown"],Vn=function(){return function(t){var r=t.string,n="Unknown",e=0,i=0,a=[];if(!r)return Ot();for(var u=0;u<r.length;u+=1){var o=r[u],v=o.codePointAt(),l=$t.getScript(v);l!==n&&!Hn.includes(l)&&(n!=="Unknown"&&a.push({start:e,end:i,attributes:{script:n}}),e=i,n=l),i+=o.length}return e<r.length&&a.push({start:e,end:r.length,attributes:{script:n}}),{string:r,runs:a}}},Rt="­",zn=Et(Ct),Nn=function(t){return t.split(Rt)},M={},Gn=function(t){var r=t.includes(Rt)?t:zn(t);return Nn(r)},te=function(){return function(t){var r="_"+t;return j(t)?[]:(M[r]||(M[r]=Gn(t)),M[r])}};export{Zn as a,Jn as b,qn as j,Xn as l,Vn as s,Qn as t,te as w};
