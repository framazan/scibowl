import{r as i,j as e,b as se}from"./vendor-react-DpsG3A-O.js";import{i as ie,L as $,g as oe}from"./visualBonuses-4DetGzrX.js";import{u as xe,T as pe,f as he,p as fe}from"./TournamentSelector-BqHBDHES.js";import{T as be,C as ce,E as de,a as ue,S as ge}from"./vendor-lucide-react-Lx6fY6Gz.js";import"./vendor-abs-svg-path-DCUpb6Nw.js";import"./index-1DbH85vI.js";import"./vendor-react-dom-D1u-fJLi.js";import"./vendor-scheduler-CoSDG3-6.js";import"./vendor-firebase-ij0QPQ9d.js";import"./vendor-firebase-app-C29JXm3G.js";import"./vendor-firebase-component-CtBPhazS.js";import"./vendor-firebase-util-DPJAB8vN.js";import"./vendor-firebase-logger-CNz1B4Yj.js";import"./vendor-idb-BXWtuYvb.js";import"./vendor-firebase-firestore-BGkxm74f.js";import"./vendor-firebase-webchannel-wrapper-QS5lB7L3.js";import"./vendor-firebase-storage-D58QqkYS.js";import"./vendor-mui-material-DksXbHt-.js";import"./vendor-mui-utils-B23qfrSe.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-mui-system-BndTH9qf.js";import"./vendor-mui-styled-engine-CPmDJbkS.js";import"./vendor-emotion-styled-5vLscvJp.js";import"./vendor-babel-runtime-WXw8LxeR.js";import"./vendor-emotion-serialize-B6qc6euy.js";import"./vendor-emotion-hash-WldOFDRm.js";import"./vendor-emotion-unitless-x5IvBceT.js";import"./vendor-emotion-memoize-3S_6p140.js";import"./vendor-emotion-use-insertion-effect-with-fallbacks-B--OEmuQ.js";import"./vendor-emotion-utils-BijCJQMc.js";import"./vendor-emotion-is-prop-valid-DOnQZHJ6.js";import"./vendor-emotion-react-DrbGOuDy.js";import"./vendor-hoist-non-react-statics-mDtaWys7.js";import"./vendor-react-is-CnyDuYXe.js";import"./vendor-emotion-cache-DvsOMRO7.js";import"./vendor-emotion-sheet-6IwnyhEX.js";import"./vendor-stylis-DDa9OTMq.js";import"./vendor-react-transition-group-Q1VPUTjR.js";import"./vendor-react-router-dom-D-i9eXTo.js";import"./vendor-react-router-D4SgS1v_.js";import"./vendor-remix-run-router-9r-WWGj9.js";import"./vendor-react-helmet-async-bvMvt1Ax.js";import"./vendor-react-fast-compare-BCtOC5yC.js";import"./vendor-invariant-DW3JcdOx.js";import"./vendor-shallowequal-Df9Q-7bk.js";import"./vendor-katex-DP_4UPSs.js";function me(a,T=()=>!0){const M=a.filter(T);return M.length?M[Math.floor(Math.random()*M.length)]:null}function G(a){const T=a?.choices;if(!T)return[];const M=["w","x","y","z"];function q(l){const w=String(l).replace(/[.)\s]/g,"").toLowerCase()[0];return{a:"w",b:"x",c:"y",d:"z",w:"w",x:"x",y:"y",z:"z",1:"w",2:"x",3:"y",4:"z"}[w]??w}function j(l){return typeof l=="string"?l:l&&typeof l=="object"?l.text??l.value??l.choice??l.content??l.answer??l.option??l.label??l.name??null:null}if(Array.isArray(T))return T.map((l,g)=>{const w=j(l);if(!w)return null;const r=l&&typeof l=="object"?l.key??l.letter??l.label:null;return[q(r??M[g]??String(g+1)),w]}).filter(Boolean);const R=Object.entries(T).map(([l,g])=>{const w=j(g);return w?[q(l),w]:null}).filter(Boolean),y=new Map(R);return M.map(l=>[l,y.get(l)]).filter(([l,g])=>g!=null)}function xt({questions:a=[],tournamentName:T=null,lazy:M=null}){const{tournaments:q,tournamentGroups:j,selectedTournaments:R,setSelectedTournaments:y,selectedCategories:l,setSelectedCategories:g,tournamentGroupsOpen:w,setTournamentGroupsOpen:r,tournamentVisibleEntriesMainRef:B,handleTournamentToggle:J,validQuestions:F,categories:V}=xe({questions:a,lazy:M}),[u,_]=i.useState(()=>{try{return document.documentElement.classList.contains("dark")}catch{return!1}});i.useEffect(()=>{try{const n=document.documentElement,o=()=>_(n.classList.contains("dark"));o();const c=new MutationObserver(o);c.observe(n,{attributes:!0,attributeFilter:["class"]});const b=window.matchMedia("(prefers-color-scheme: dark)");return b.addEventListener("change",o),()=>{c.disconnect(),b.removeEventListener("change",o)}}catch{}},[]);const[A,ne]=i.useState(!0),[k,O]=i.useState(!0),[h,re]=i.useState(!1),[z,x]=i.useState(!1);i.useEffect(()=>{h||x(!1)},[h]);const[U,X]=i.useState(5),E=i.useMemo(()=>{const n=new Set(l);return F.filter(o=>{if(l.length&&!n.has(o.category))return!1;const c=o.question_type?.toLowerCase(),b=ie(o);return c==="tossup"?A:c==="bonus"?!k&&!h?!1:h&&z||!k&&h?b:k&&!h?!b:!0:!1})},[F,l,A,k,h,z]),[f,K]=i.useState(null),[I,L]=i.useState(""),[Q,S]=i.useState(null),[Y,D]=i.useState(!1),[p,v]=i.useState(null),N=i.useMemo(()=>{const n=E.some(c=>c.question_type?.toLowerCase()==="tossup"),o=E.some(c=>c.question_type?.toLowerCase()==="bonus");return A&&n?"tossup":o?"bonus":null},[E,A]),P=i.useMemo(()=>G(f),[f]);function W(n,o){if(!o)return{correct:!1};const c=String(o.answer??"").trim().toLowerCase(),b=String(n??"").trim().toLowerCase(),t=c.replace(/[()\s.]/g,"").charAt(0),d=fe(o),m=new Map(d).get(b),C={a:"w",b:"x",c:"y",d:"z"}[t]||t;if(["w","x","y","z"].includes(C)){const le=C===b;return{correct:le,reason:le?void 0:`Correct: ${C.toUpperCase()}`}}const te=String(m??"").toLowerCase().replace(/\s+/g," ").trim(),ae=c.toLowerCase().replace(/\s+/g," ").trim();return{correct:!!te&&(te===ae||ae.includes(te)||te.includes(ae))}}async function Z(){try{let n;P.length>0?n=W(I,f):n=await(await fetch("/api/checkAnswer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAnswer:I,correctAnswer:f.answer,question:f.question})})).json(),S(n);const o=f?.question_type?.toLowerCase()==="tossup";if(n.correct&&o){const c=he(f,E);c&&v({bonus:c,userAnswer:"",result:null,showAnswer:!1})}}catch{S({correct:!1,reason:"Check failed"})}}async function ee(){if(p)try{const n=G(p.bonus);let o;n.length>0?o=W(p.userAnswer,p.bonus):o=await(await fetch("/api/checkAnswer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAnswer:p.userAnswer,correctAnswer:p.bonus.answer,question:p.bonus.question})})).json(),v(c=>({...c,result:o}))}catch{v(o=>({...o,result:{correct:!1,reason:"Check failed"}}))}}return e.jsxs("div",{className:"grid gap-6 w-full md:grid-cols-[320px_minmax(0,1fr)]",children:[e.jsx("div",{className:"md:self-start",children:e.jsxs("div",{className:"glass p-6 space-y-6",children:[R.length===0&&e.jsxs("div",{role:"alert","aria-live":"polite",className:"flex items-start gap-2 rounded-lg border-l-4 border-amber-500 bg-amber-50 text-amber-900 dark:border-amber-400 dark:bg-amber-900/20 dark:text-amber-100 px-3 py-2",children:[e.jsx(be,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("div",{className:"text-sm",children:"No tournaments selected."})]}),e.jsx(pe,{tournaments:q,tournamentGroups:j,selectedTournaments:R,setSelectedTournaments:y,tournamentGroupsOpen:w,setTournamentGroupsOpen:r,handleTournamentToggle:J,tournamentVisibleEntriesMainRef:B,isDark:u,showTournamentModal:!1,setShowTournamentModal:()=>{}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(n=>{const o=l.includes(n);return e.jsxs("label",{className:`chip cursor-pointer ${o?"ring-1 ring-tint bg-tint/10":""}`,title:n,children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:o,onChange:()=>g(c=>c.includes(n)?c.filter(b=>b!==n):[...c,n])}),e.jsx("span",{className:"truncate max-w-[12rem] inline-block align-middle",children:n})]},n)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Question Types"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("label",{className:"chip cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:A,onChange:()=>ne(n=>!n)})," Toss-ups"]}),e.jsxs("label",{className:`chip cursor-pointer ${!A&&!k?"ring-1 ring-tint bg-tint/10":""}`,children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:k,onChange:()=>O(n=>!n)})," Bonuses"]}),e.jsxs("label",{className:`chip items-center gap-2 cursor-pointer ${k?"":"opacity-50 pointer-events-none"}`,title:k?"Include image-based bonuses":"Enable Bonuses to toggle",style:{alignItems:"center",minWidth:220,justifyContent:"flex-start",flexWrap:"nowrap",display:"inline-flex"},children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:h,onChange:()=>re(n=>!n),disabled:!k}),e.jsx("span",{children:"Visual bonuses"}),e.jsxs("span",{className:`${h?"":"opacity-50"} ml-1 flex items-center gap-1`,onClick:n=>n.stopPropagation(),title:h?"Only get visual bonuses":"Enable Visual bonuses first",style:{alignItems:"center"},children:[e.jsx("button",{type:"button",role:"switch","aria-checked":z,"aria-label":"Only visual bonuses",disabled:!h,onClick:()=>x(n=>!n),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-tint/60 ${z?"bg-tint":"bg-black/30 dark:bg-white/30"} ${h?"":"cursor-not-allowed"}`,style:{verticalAlign:"middle"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${z?"translate-x-4":"translate-x-1"}`})}),e.jsx("span",{className:"text-[10px] leading-none text-black/60 dark:text-white/60 select-none ml-1",style:{fontWeight:500},children:"only"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Reading speed"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:1,max:20,step:1,value:U,onChange:n=>X(Number(n.target.value)),"aria-label":"Reading speed in words per second",className:"w-48"}),e.jsxs("div",{className:"text-sm tabular-nums",children:[U," w/s"]})]}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Space to buzz. Enter to check. “n” next, “a” show answer."})]})]})}),e.jsx("div",{className:"min-w-0",children:f?e.jsx(we,{current:f,setCurrent:n=>{K(n),L(""),S(null),D(!1),v(null)},pool:E,preferredType:N,userAnswer:I,setUserAnswer:L,result:Q,setResult:S,showAnswer:Y,setShowAnswer:D,bonusState:p,setBonusState:v,check:Z,checkBonus:ee,readingSpeed:U}):e.jsx("div",{className:"glass p-6",children:E.length?e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("div",{children:"Ready to begin."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{const o=me(E,N?(c=>c.question_type?.toLowerCase()===N):(()=>!0));o&&(K(o),L(""),S(null),D(!1),v(null))},children:"Start"})]}):"No questions available. Select tournaments."})})]})}function we({current:a,setCurrent:T,pool:M,preferredType:q,userAnswer:j,setUserAnswer:R,result:y,setResult:l,showAnswer:g,setShowAnswer:w,bonusState:r,setBonusState:B,check:J,checkBonus:F,readingSpeed:V}){const u=i.useMemo(()=>G(a),[a]),[_,A]=se.useState(null),[ne,k]=se.useState(!1),[O,h]=se.useState(null),[re,z]=se.useState(!1),[x,U]=i.useState(!1),[X,E]=i.useState(0),[f,K]=i.useState(!0),I=i.useRef(null),[L,Q]=i.useState(0),[S,Y]=i.useState(!1),D=i.useMemo(()=>String(a?.question??""),[a?.id]),p=i.useMemo(()=>D.split(/\s+/).filter(Boolean),[D]),v=X>=p.length,N=String(a?.question_type||"").toLowerCase()==="bonus",P=N||x||v;i.useEffect(()=>{if(!a||!f||x||p.length===0)return;const t=Math.max(50,Math.round(1e3/Math.max(1,V))),d=setInterval(()=>{E(s=>s>=p.length?p.length:s+1)},t);return()=>clearInterval(d)},[a?.id,f,x,p.length,V]),i.useEffect(()=>{U(!1),E(0),K(!0),Q(0),Y(!1)},[a?.id]),i.useEffect(()=>{if(!a||u.length===0||!v||x||L>=4)return;const t=Math.max(250,1e3-Math.min(20,V)*25),d=setInterval(()=>{Q(s=>Math.min(4,s+1))},t);return()=>clearInterval(d)},[a?.id,v,u.length,L,V,x]),i.useEffect(()=>{if(!a||u.length===0||!y||L>=4)return;S||Y(!0);const d=setInterval(()=>{Q(s=>s>=4?4:s+1)},150);return()=>clearInterval(d)},[y,a?.id,u.length,L,S]),i.useEffect(()=>{function t(s){return s&&(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)}const d=s=>{const m=s.key,H=s.target;if((m===" "||m==="Spacebar")&&(t(H)||(s.preventDefault(),N?u.length===0&&setTimeout(()=>I.current?.focus(),0):!x&&f&&(U(!0),K(!1),u.length===0&&setTimeout(()=>I.current?.focus(),0)))),m==="Enter"){if(r&&!r.result&&r.userAnswer){s.preventDefault(),F();return}(u.length>0?(N||x)&&!!j:P&&String(j).trim().length>0)&&(s.preventDefault(),J())}if((m==="n"||m==="N")&&!t(H)&&(s.preventDefault(),W()),(m==="a"||m==="A")&&!t(H)&&(s.preventDefault(),w(C=>!C)),!t(H)&&(N||x)&&u.length>0){const C=m.toLowerCase();(C==="w"||C==="x"||C==="y"||C==="z")&&(s.preventDefault(),R(C))}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[x,f,u.length,P,j,r]),i.useEffect(()=>{let t=!1;async function d(){A(null);const s=a;if(!s||s.question_type?.toLowerCase()!=="bonus"||!ie(s))return;const m=await oe({tournament:s.tournament,round:s.round,question_number:s.question_number}).catch(()=>null);t||A(m)}return d(),()=>{t=!0}},[a?.id]),i.useEffect(()=>{let t=!1;async function d(){h(null);const s=r?.bonus;if(!s||!ie(s))return;const m=await oe({tournament:s.tournament,round:s.round,question_number:s.question_number}).catch(()=>null);t||h(m)}return d(),()=>{t=!0}},[r?.bonus?.id]);function W(){const d=me(M,q?(s=>s.question_type?.toLowerCase()===q):(()=>!0));T(d)}function Z(t){if(!t||typeof t!="object")return null;const d=["explanation","Explanation","rationale","Rationale","solution","Solution","notes","Notes","why"];for(const s of d){const m=t[s];if(typeof m=="string"&&m.trim())return m.trim()}return null}const ee=i.useMemo(()=>Z(a),[a?.id]),n=i.useMemo(()=>Z(r?.bonus),[r?.bonus?.id]),o=String(a.tournament).toUpperCase(),c=N?!0:x,b=i.useMemo(()=>{if(!Array.isArray(u)||u.length===0)return[];const t=new Map(u);return["w","x","y","z"].map(s=>[s,t.get(s)])},[u]);return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx("style",{children:`
        /* Keep display-math inline, no big margins */
        .practice-katex .katex-display { margin: 0; }
        .practice-katex .katex-display > .katex { display: inline !important; }

        /* Minimize extra space around inline math */
        .practice-katex .katex { margin-left: 0.05em; margin-right: 0.02em; }
        /* If math is the very first thing in a block, don't indent it */
        .practice-katex > .katex:first-child { margin-left: 0; }
      `}),e.jsxs("div",{className:"glass p-6",children:[e.jsxs("div",{className:"text-sm text-black/60 dark:text-white/80 mb-2",children:[e.jsx("span",{className:"font-semibold",children:o})," • ","ROUND ",a.round??"—"," • ",a.category,a.question_number!=null&&e.jsxs(e.Fragment,{children:[" • ","Q",a.question_number]}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-200 dark:border-purple-700",children:N?"BONUS":"TOSS-UP"}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-700",children:u.length>0?"MULTIPLE CHOICE":"SHORT ANSWER"})]}),a?.question_type?.toLowerCase()==="bonus"&&_&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:_,alt:`Visual bonus${a?.tournament?` • ${a.tournament}`:""}${a?.round?` • Round ${a.round}`:""}${a?.question_number!=null?` • Q${a.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>k(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),v?e.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:e.jsx($,{children:a.question})}):e.jsxs("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:[e.jsx($,{children:p.slice(0,Math.min(X,p.length)).join(" ")}),!x&&e.jsx("div",{className:"mt-2 text-sm text-black/60 dark:text-white/60",children:"Press space to buzz"})]})]}),e.jsxs("div",{className:"glass p-6 flex flex-col justify-between",style:{minHeight:"40vh",width:"100%"},children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your answer"}),Array.isArray(u)&&u.length>0?e.jsx("div",{className:"space-y-2 text-lg mb-4",children:!v&&!x&&!N?e.jsx("div",{className:"text-sm text-black/60 dark:text-white/70",children:"Choices will appear after the question is read."}):b.map(([t,d],s)=>e.jsxs("label",{className:`flex items-baseline gap-2 ${c?"cursor-pointer":"cursor-not-allowed opacity-75"}`,children:[e.jsx("input",{type:"radio",name:`tossup-mc-${a.id}`,value:t,checked:String(j)===String(t),onChange:()=>R(t),className:"accent-tint w-5 h-5",disabled:!c}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),")"," ",s<L&&d?e.jsx($,{children:d}):e.jsx("span",{className:"text-black/50 dark:text-white/50",children:"…"})]})]},t))}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:j,onChange:t=>R(t.target.value),placeholder:"Type your answer",ref:I,disabled:!P}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[(()=>{const t=b.length>0?(N||x)&&!!j:P&&!!j;return e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:J,disabled:!t,title:"Check answer",children:e.jsx(ce,{size:16})})})(),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>w(t=>!t),title:g?"Hide answer":"Reveal answer",children:g?e.jsx(de,{size:16}):e.jsx(ue,{size:16})}),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:W,title:"Next question",children:e.jsx(ge,{size:16})})]}),y&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(y.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[y.correct?"Correct":"Incorrect",y.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:y.reason}):null,!y.correct&&ee&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",ee]})]}),g&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"ANSWER"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx($,{children:a.answer.toUpperCase()})})]}),r&&e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Bonus"}),O&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:O,alt:`Visual bonus${r?.bonus?.tournament?` • ${r.bonus.tournament}`:""}${r?.bonus?.round?` • Round ${r.bonus.round}`:""}${r?.bonus?.question_number!=null?` • Q${r.bonus.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>z(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),e.jsx("div",{className:"mb-2 whitespace-pre-line text-lg practice-katex",children:e.jsx($,{children:r.bonus.question})}),G(r.bonus).length>0?e.jsx("div",{className:"space-y-2 text-lg mb-4",children:G(r.bonus).map(([t,d])=>e.jsxs("label",{className:"flex items-baseline gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`bonus-mc-${r.bonus.id}`,value:t,checked:String(r.userAnswer)===String(t),onChange:()=>B(s=>({...s,userAnswer:t})),className:"accent-tint w-5 h-5",disabled:!!r.result}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),") ",e.jsx($,{children:d})]})]},t))}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:r.userAnswer,onChange:t=>B(d=>({...d,userAnswer:t.target.value})),placeholder:"Type your answer",disabled:!!r.result}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:F,disabled:!r.userAnswer||!!r.result,title:"Check answer",children:e.jsx(ce,{size:16})}),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>B(t=>({...t,showAnswer:!t.showAnswer})),title:r.showAnswer?"Hide answer":"Reveal answer",children:r.showAnswer?e.jsx(de,{size:16}):e.jsx(ue,{size:16})})]}),r.result&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(r.result.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[r.result.correct?"Correct":"Incorrect",r.result.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:r.result.reason}):null,!r.result.correct&&n&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",n]})]}),r.showAnswer&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"Answer"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx($,{children:r.bonus.answer})})]})]})]}),ne&&_&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>k(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:_,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>k(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]}),re&&O&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>z(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:O,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>z(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]})]})}export{xt as default};
