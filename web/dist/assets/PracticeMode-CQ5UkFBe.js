import{r as l,j as e,b as ae}from"./vendor-react-DpsG3A-O.js";import{i as oe,L as D,g as ue}from"./visualBonuses-P43A_idX.js";import{u as fe,T as be,c as ge,a as de,f as we,p as ke}from"./client-M5VKMgG_.js";import{T as je,C as me,E as xe,a as pe,S as ye}from"./vendor-lucide-react-Lx6fY6Gz.js";import"./vendor-abs-svg-path-DCUpb6Nw.js";import"./index-DLnuwQ1T.js";import"./vendor-react-dom-D1u-fJLi.js";import"./vendor-scheduler-CoSDG3-6.js";import"./vendor-firebase-BxSqqaym.js";import"./vendor-firebase-app-CZHFuJSY.js";import"./vendor-firebase-component-BsAoxdSC.js";import"./vendor-firebase-util-DLzrvjrQ.js";import"./vendor-firebase-logger-CNz1B4Yj.js";import"./vendor-idb-BXWtuYvb.js";import"./vendor-firebase-app-check-D4a6coeq.js";import"./vendor-firebase-firestore-C-aRomGP.js";import"./vendor-firebase-webchannel-wrapper-QS5lB7L3.js";import"./vendor-firebase-storage-BvGgD_BW.js";import"./vendor-mui-material-DksXbHt-.js";import"./vendor-mui-utils-B23qfrSe.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-mui-system-BndTH9qf.js";import"./vendor-mui-styled-engine-CPmDJbkS.js";import"./vendor-emotion-styled-5vLscvJp.js";import"./vendor-babel-runtime-WXw8LxeR.js";import"./vendor-emotion-serialize-B6qc6euy.js";import"./vendor-emotion-hash-WldOFDRm.js";import"./vendor-emotion-unitless-x5IvBceT.js";import"./vendor-emotion-memoize-3S_6p140.js";import"./vendor-emotion-use-insertion-effect-with-fallbacks-B--OEmuQ.js";import"./vendor-emotion-utils-BijCJQMc.js";import"./vendor-emotion-is-prop-valid-DOnQZHJ6.js";import"./vendor-emotion-react-DrbGOuDy.js";import"./vendor-hoist-non-react-statics-mDtaWys7.js";import"./vendor-react-is-CnyDuYXe.js";import"./vendor-emotion-cache-DvsOMRO7.js";import"./vendor-emotion-sheet-6IwnyhEX.js";import"./vendor-stylis-DDa9OTMq.js";import"./vendor-react-transition-group-Q1VPUTjR.js";import"./vendor-react-router-dom-D-i9eXTo.js";import"./vendor-react-router-D4SgS1v_.js";import"./vendor-remix-run-router-9r-WWGj9.js";import"./vendor-react-helmet-async-bvMvt1Ax.js";import"./vendor-react-fast-compare-BCtOC5yC.js";import"./vendor-invariant-DW3JcdOx.js";import"./vendor-shallowequal-Df9Q-7bk.js";import"./vendor-katex-DP_4UPSs.js";function he(r,E=()=>!0){const C=r.filter(E);return C.length?C[Math.floor(Math.random()*C.length)]:null}function J(r){const E=r?.choices;if(!E)return[];const C=["w","x","y","z"];function $(i){const v=String(i).replace(/[.)\s]/g,"").toLowerCase()[0];return{a:"w",b:"x",c:"y",d:"z",w:"w",x:"x",y:"y",z:"z",1:"w",2:"x",3:"y",4:"z"}[v]??v}function g(i){return typeof i=="string"?i:i&&typeof i=="object"?i.text??i.value??i.choice??i.content??i.answer??i.option??i.label??i.name??null:null}if(Array.isArray(E))return E.map((i,h)=>{const v=g(i);if(!v)return null;const q=i&&typeof i=="object"?i.key??i.letter??i.label:null;return[$(q??C[h]??String(h+1)),v]}).filter(Boolean);const R=Object.entries(E).map(([i,h])=>{const v=g(h);return v?[$(i),v]:null}).filter(Boolean),S=new Map(R);return C.map(i=>[i,S.get(i)]).filter(([i,h])=>h!=null)}function gt({questions:r=[],tournamentName:E=null,lazy:C=null}){const{tournaments:$,tournamentGroups:g,selectedTournaments:R,setSelectedTournaments:S,selectedCategories:i,setSelectedCategories:h,tournamentGroupsOpen:v,setTournamentGroupsOpen:q,tournamentVisibleEntriesMainRef:X,handleTournamentToggle:a,validQuestions:F,categories:Z}=fe({questions:r,lazy:C}),[ee,K]=l.useState(()=>{try{return document.documentElement.classList.contains("dark")}catch{return!1}});l.useEffect(()=>{try{const n=document.documentElement,o=()=>K(n.classList.contains("dark"));o();const c=new MutationObserver(o);c.observe(n,{attributes:!0,attributeFilter:["class"]});const m=window.matchMedia("(prefers-color-scheme: dark)");return m.addEventListener("change",o),()=>{c.disconnect(),m.removeEventListener("change",o)}}catch{}},[]);const[d,P]=l.useState(!0),[j,le]=l.useState(!0),[b,Q]=l.useState(!1),[I,te]=l.useState(!1);l.useEffect(()=>{b||te(!1)},[b]);const[V,x]=l.useState(5),M=l.useMemo(()=>{const n=new Set(i);return F.filter(o=>{if(i.length&&!n.has(o.category))return!1;const c=o.question_type?.toLowerCase(),m=oe(o);return c==="tossup"?d:c==="bonus"?!j&&!b?!1:b&&I||!j&&b?m:j&&!b?!m:!0:!1})},[F,i,d,j,b,I]),[y,Y]=l.useState(null),[B,W]=l.useState(""),[_,H]=l.useState(""),[U,T]=l.useState(null),[se,G]=l.useState(!1),[N,w]=l.useState(null),z=l.useMemo(()=>{const n=M.some(c=>c.question_type?.toLowerCase()==="tossup"),o=M.some(c=>c.question_type?.toLowerCase()==="bonus");return d&&n?"tossup":o?"bonus":null},[M,d]),f=l.useMemo(()=>J(y),[y]);function O(n,o){if(!o)return{correct:!1};const c=String(o.answer??"").trim().toLowerCase(),m=String(n??"").trim().toLowerCase(),L=c.replace(/[()\s.]/g,"").charAt(0),t=ke(o),s=new Map(t).get(m),A={a:"w",b:"x",c:"y",d:"z"}[L]||L;if(["w","x","y","z"].includes(A)){const ce=A===m;return{correct:ce,reason:ce?void 0:`Correct: ${A.toUpperCase()}`}}const k=String(s??"").toLowerCase().replace(/\s+/g," ").trim(),ie=c.toLowerCase().replace(/\s+/g," ").trim();return{correct:!!k&&(k===ie||ie.includes(k)||k.includes(ie))}}async function ne(){try{let n;const o=y?.question_type?.toLowerCase()==="tossup",c=String(_||"").trim();if(f.length>0&&!(o&&c.length>0))n=O(B,y);else{const m=f.length>0&&o&&c.length>0,L={userAnswer:f.length>0&&o&&c.length>0?_:B,correctAnswer:y.answer,question:y.question};m&&(L.choices=f),n=await(m?await ge(L):await de(L)).json()}if(T(n),n.correct&&o){const m=we(y,M);m&&w({bonus:m,userAnswer:"",result:null,showAnswer:!1})}}catch{T({correct:!1,reason:"Check failed"})}}async function re(){if(N)try{const n=J(N.bonus);let o;n.length>0?o=O(N.userAnswer,N.bonus):o=await(await de({userAnswer:N.userAnswer,correctAnswer:N.bonus.answer,question:N.bonus.question})).json(),w(c=>({...c,result:o}))}catch{w(o=>({...o,result:{correct:!1,reason:"Check failed"}}))}}return e.jsxs("div",{className:"grid gap-6 w-full md:grid-cols-[320px_minmax(0,1fr)]",children:[e.jsx("div",{className:"md:self-start",children:e.jsxs("div",{className:"glass p-6 space-y-6",children:[R.length===0&&e.jsxs("div",{role:"alert","aria-live":"polite",className:"flex items-start gap-2 rounded-lg border-l-4 border-amber-500 bg-amber-50 text-amber-900 dark:border-amber-400 dark:bg-amber-900/20 dark:text-amber-100 px-3 py-2",children:[e.jsx(je,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("div",{className:"text-sm",children:"No tournaments selected."})]}),e.jsx(be,{tournaments:$,tournamentGroups:g,selectedTournaments:R,setSelectedTournaments:S,tournamentGroupsOpen:v,setTournamentGroupsOpen:q,handleTournamentToggle:a,tournamentVisibleEntriesMainRef:X,isDark:ee,showTournamentModal:!1,setShowTournamentModal:()=>{}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(n=>{const o=i.includes(n);return e.jsxs("label",{className:`chip cursor-pointer ${o?"ring-1 ring-tint bg-tint/10":""}`,title:n,children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:o,onChange:()=>h(c=>c.includes(n)?c.filter(m=>m!==n):[...c,n])}),e.jsx("span",{className:"truncate max-w-[12rem] inline-block align-middle",children:n})]},n)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Question Types"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("label",{className:"chip cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:d,onChange:()=>P(n=>!n)})," Toss-ups"]}),e.jsxs("label",{className:`chip cursor-pointer ${!d&&!j?"ring-1 ring-tint bg-tint/10":""}`,children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:j,onChange:()=>le(n=>!n)})," Bonuses"]}),e.jsxs("label",{className:`chip items-center gap-2 cursor-pointer ${j?"":"opacity-50 pointer-events-none"}`,title:j?"Include image-based bonuses":"Enable Bonuses to toggle",style:{alignItems:"center",minWidth:220,justifyContent:"flex-start",flexWrap:"nowrap",display:"inline-flex"},children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:b,onChange:()=>Q(n=>!n),disabled:!j}),e.jsx("span",{children:"Visual bonuses"}),e.jsxs("span",{className:`${b?"":"opacity-50"} ml-1 flex items-center gap-1`,onClick:n=>n.stopPropagation(),title:b?"Only get visual bonuses":"Enable Visual bonuses first",style:{alignItems:"center"},children:[e.jsx("button",{type:"button",role:"switch","aria-checked":I,"aria-label":"Only visual bonuses",disabled:!b,onClick:()=>te(n=>!n),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-tint/60 ${I?"bg-tint":"bg-black/30 dark:bg-white/30"} ${b?"":"cursor-not-allowed"}`,style:{verticalAlign:"middle"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${I?"translate-x-4":"translate-x-1"}`})}),e.jsx("span",{className:"text-[10px] leading-none text-black/60 dark:text-white/60 select-none ml-1",style:{fontWeight:500},children:"only"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Reading speed"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:1,max:20,step:1,value:V,onChange:n=>x(Number(n.target.value)),"aria-label":"Reading speed in words per second",className:"w-48"}),e.jsxs("div",{className:"text-sm tabular-nums",children:[V," w/s"]})]}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Space to buzz. Enter to check. “n” next, “a” show answer."})]})]})}),e.jsx("div",{className:"min-w-0",children:y?e.jsx(ve,{current:y,setCurrent:n=>{Y(n),W(""),H(""),T(null),G(!1),w(null)},pool:M,preferredType:z,userAnswer:B,setUserAnswer:W,mcTypedAnswer:_,setMcTypedAnswer:H,result:U,setResult:T,showAnswer:se,setShowAnswer:G,bonusState:N,setBonusState:w,check:ne,checkBonus:re,readingSpeed:V}):e.jsx("div",{className:"glass p-6",children:M.length?e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("div",{children:"Ready to begin."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{const o=he(M,z?(c=>c.question_type?.toLowerCase()===z):(()=>!0));o&&(Y(o),W(""),H(""),T(null),G(!1),w(null))},children:"Start"})]}):"No questions available. Select tournaments."})})]})}function ve({current:r,setCurrent:E,pool:C,preferredType:$,userAnswer:g,setUserAnswer:R,mcTypedAnswer:S,setMcTypedAnswer:i,result:h,setResult:v,showAnswer:q,setShowAnswer:X,bonusState:a,setBonusState:F,check:Z,checkBonus:ee,readingSpeed:K}){const d=l.useMemo(()=>J(r),[r]),[P,j]=ae.useState(null),[le,b]=ae.useState(!1),[Q,I]=ae.useState(null),[te,V]=ae.useState(!1),[x,M]=l.useState(!1),[y,Y]=l.useState(0),[B,W]=l.useState(!0),_=l.useRef(null),H=l.useRef(null),[U,T]=l.useState(0),[se,G]=l.useState(!1),N=l.useMemo(()=>String(r?.question??""),[r?.id]),w=l.useMemo(()=>N.split(/\s+/).filter(Boolean),[N]),z=y>=w.length,f=String(r?.question_type||"").toLowerCase()==="bonus",O=f||x||z;l.useEffect(()=>{if(!r||!B||x||w.length===0)return;const t=Math.max(50,Math.round(1e3/Math.max(1,K))),u=setInterval(()=>{Y(s=>s>=w.length?w.length:s+1)},t);return()=>clearInterval(u)},[r?.id,B,x,w.length,K]),l.useEffect(()=>{M(!1),Y(0),W(!0),T(0),G(!1)},[r?.id]),l.useEffect(()=>{if(!r||d.length===0||!z||x||U>=4)return;const t=Math.max(250,1e3-Math.min(20,K)*25),u=setInterval(()=>{T(s=>Math.min(4,s+1))},t);return()=>clearInterval(u)},[r?.id,z,d.length,U,K,x]),l.useEffect(()=>{if(!r||d.length===0||!h||U>=4)return;se||G(!0);const u=setInterval(()=>{T(s=>s>=4?4:s+1)},150);return()=>clearInterval(u)},[h,r?.id,d.length,U,se]),l.useEffect(()=>{function t(s){return s&&(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)}const u=s=>{const p=s.key,A=s.target;if((p===" "||p==="Spacebar")&&(t(A)||(s.preventDefault(),f?d.length===0&&setTimeout(()=>_.current?.focus(),0):!x&&B&&(M(!0),W(!1),d.length===0&&setTimeout(()=>_.current?.focus(),0)))),p==="Enter"){if(a&&!a.result&&a.userAnswer){s.preventDefault(),ee();return}(d.length>0?(f||x)&&(!f&&x&&String(S).trim().length>0||!!g):O&&String(g).trim().length>0)&&(s.preventDefault(),Z())}if((p==="n"||p==="N")&&!t(A)&&(s.preventDefault(),ne()),(p==="a"||p==="A")&&!t(A)&&(s.preventDefault(),X(k=>!k)),!t(A)&&(f||x)&&d.length>0){const k=p.toLowerCase();(k==="w"||k==="x"||k==="y"||k==="z")&&(s.preventDefault(),R(k))}!t(A)&&!f&&x&&d.length>0&&(p==="t"||p==="T")&&(s.preventDefault(),setTimeout(()=>H.current?.focus(),0))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[x,B,d.length,O,g,a,S]),l.useEffect(()=>{let t=!1;async function u(){j(null);const s=r;if(!s||s.question_type?.toLowerCase()!=="bonus"||!oe(s))return;const p=await ue({tournament:s.tournament,round:s.round,question_number:s.question_number}).catch(()=>null);t||j(p)}return u(),()=>{t=!0}},[r?.id]),l.useEffect(()=>{let t=!1;async function u(){I(null);const s=a?.bonus;if(!s||!oe(s))return;const p=await ue({tournament:s.tournament,round:s.round,question_number:s.question_number}).catch(()=>null);t||I(p)}return u(),()=>{t=!0}},[a?.bonus?.id]);function ne(){const u=he(C,$?(s=>s.question_type?.toLowerCase()===$):(()=>!0));E(u)}function re(t){if(!t||typeof t!="object")return null;const u=["explanation","Explanation","rationale","Rationale","solution","Solution","notes","Notes","why"];for(const s of u){const p=t[s];if(typeof p=="string"&&p.trim())return p.trim()}return null}const n=l.useMemo(()=>re(r),[r?.id]),o=l.useMemo(()=>re(a?.bonus),[a?.bonus?.id]),c=String(r.tournament).toUpperCase(),m=f?!0:x,L=l.useMemo(()=>{if(!Array.isArray(d)||d.length===0)return[];const t=new Map(d);return["w","x","y","z"].map(s=>[s,t.get(s)])},[d]);return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx("style",{children:`
        /* Keep display-math inline, no big margins */
        .practice-katex .katex-display { margin: 0; }
        .practice-katex .katex-display > .katex { display: inline !important; }

        /* Minimize extra space around inline math */
        .practice-katex .katex { margin-left: 0.05em; margin-right: 0.02em; }
        /* If math is the very first thing in a block, don't indent it */
        .practice-katex > .katex:first-child { margin-left: 0; }
      `}),e.jsxs("div",{className:"glass p-6",children:[e.jsxs("div",{className:"text-sm text-black/60 dark:text-white/80 mb-2",children:[e.jsx("span",{className:"font-semibold",children:c})," • ","ROUND ",r.round??"—"," • ",r.category,r.question_number!=null&&e.jsxs(e.Fragment,{children:[" • ","Q",r.question_number]}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-200 dark:border-purple-700",children:f?"BONUS":"TOSS-UP"}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-700",children:d.length>0?"MULTIPLE CHOICE":"SHORT ANSWER"})]}),r?.question_type?.toLowerCase()==="bonus"&&P&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:P,alt:`Visual bonus${r?.tournament?` • ${r.tournament}`:""}${r?.round?` • Round ${r.round}`:""}${r?.question_number!=null?` • Q${r.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>b(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),z?e.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:e.jsx(D,{children:r.question})}):e.jsxs("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:[e.jsx(D,{children:w.slice(0,Math.min(y,w.length)).join(" ")}),!x&&e.jsx("div",{className:"mt-2 text-sm text-black/60 dark:text-white/60",children:"Press space to buzz"})]})]}),e.jsxs("div",{className:"glass p-6 flex flex-col justify-between",style:{minHeight:"40vh",width:"100%"},children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your answer"}),Array.isArray(d)&&d.length>0?e.jsxs("div",{className:"space-y-3 text-lg mb-4",children:[!z&&!x&&!f?e.jsx("div",{className:"text-sm text-black/60 dark:text-white/70",children:"Choices will appear after the question is read."}):L.map(([t,u],s)=>e.jsxs("label",{className:`flex items-baseline gap-2 ${m?"cursor-pointer":"cursor-not-allowed opacity-75"}`,children:[e.jsx("input",{type:"radio",name:`tossup-mc-${r.id}`,value:t,checked:String(g)===String(t),onChange:()=>R(t),className:"accent-tint w-5 h-5",disabled:!m}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),")"," ",s<U&&u?e.jsx(D,{children:u}):e.jsx("span",{className:"text-black/50 dark:text-white/50",children:"…"})]})]},t)),!f&&x&&e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:S,onChange:t=>i(t.target.value),placeholder:"Type your answer (press “t” to focus)",ref:H,disabled:!m})]}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:g,onChange:t=>R(t.target.value),placeholder:"Type your answer",ref:_,disabled:!O}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[(()=>{const t=L.length>0?(f||x)&&(!f&&x&&String(S).trim().length>0||!!g):O&&!!g;return e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:Z,disabled:!t,title:"Check answer",children:e.jsx(me,{size:16})})})(),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>X(t=>!t),title:q?"Hide answer":"Reveal answer",children:q?e.jsx(xe,{size:16}):e.jsx(pe,{size:16})}),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:ne,title:"Next question",children:e.jsx(ye,{size:16})})]}),h&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(h.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[h.correct?"Correct":"Incorrect",h.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:h.reason}):null,!h.correct&&n&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",n]})]}),q&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"ANSWER"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx(D,{children:r.answer.toUpperCase()})})]}),a&&e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Bonus"}),Q&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:Q,alt:`Visual bonus${a?.bonus?.tournament?` • ${a.bonus.tournament}`:""}${a?.bonus?.round?` • Round ${a.bonus.round}`:""}${a?.bonus?.question_number!=null?` • Q${a.bonus.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>V(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),e.jsx("div",{className:"mb-2 whitespace-pre-line text-lg practice-katex",children:e.jsx(D,{children:a.bonus.question})}),J(a.bonus).length>0?e.jsx("div",{className:"space-y-2 text-lg mb-4",children:J(a.bonus).map(([t,u])=>e.jsxs("label",{className:"flex items-baseline gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`bonus-mc-${a.bonus.id}`,value:t,checked:String(a.userAnswer)===String(t),onChange:()=>F(s=>({...s,userAnswer:t})),className:"accent-tint w-5 h-5",disabled:!!a.result}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),") ",e.jsx(D,{children:u})]})]},t))}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:a.userAnswer,onChange:t=>F(u=>({...u,userAnswer:t.target.value})),placeholder:"Type your answer",disabled:!!a.result}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:ee,disabled:!a.userAnswer||!!a.result,title:"Check answer",children:e.jsx(me,{size:16})}),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>F(t=>({...t,showAnswer:!t.showAnswer})),title:a.showAnswer?"Hide answer":"Reveal answer",children:a.showAnswer?e.jsx(xe,{size:16}):e.jsx(pe,{size:16})})]}),a.result&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(a.result.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[a.result.correct?"Correct":"Incorrect",a.result.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:a.result.reason}):null,!a.result.correct&&o&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",o]})]}),a.showAnswer&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"Answer"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx(D,{children:a.bonus.answer})})]})]})]}),le&&P&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>b(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:P,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>b(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]}),te&&Q&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>V(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:Q,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>V(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]})]})}export{gt as default};
