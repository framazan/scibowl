import{r,j as e,b as be}from"./vendor-react-DpsG3A-O.js";import{u as $e,a as Ve,p as G,T as qe,C as Qe,R as Ue,L as A,c as De,b as Ne,f as We}from"./index-D40vYvX6.js";import{i as we,g as Ce}from"./visualBonuses-DUgqxwx-.js";import{d as Me,e as Oe,f as Fe,T as He,g as Ee,E as Re,h as Le,i as Xe}from"./vendor-lucide-react-DoOgXp02.js";import"./vendor-abs-svg-path-DCUpb6Nw.js";import"./vendor-react-dom-D1u-fJLi.js";import"./vendor-scheduler-CoSDG3-6.js";import"./vendor-firebase-B4IeM3Lq.js";import"./vendor-firebase-app-DqcDUDC6.js";import"./vendor-firebase-component-B9jxOSis.js";import"./vendor-firebase-util-CIVODmCg.js";import"./vendor-firebase-logger-CNz1B4Yj.js";import"./vendor-idb-BXWtuYvb.js";import"./vendor-firebase-app-check-Co35-rT3.js";import"./vendor-firebase-firestore-BRp-7IKb.js";import"./vendor-firebase-webchannel-wrapper-QS5lB7L3.js";import"./vendor-firebase-storage-D1N4MLec.js";import"./vendor-firebase-database-DJucM1bQ.js";import"./vendor-react-helmet-async-bvMvt1Ax.js";import"./vendor-react-fast-compare-BCtOC5yC.js";import"./vendor-invariant-DW3JcdOx.js";import"./vendor-shallowequal-Df9Q-7bk.js";import"./vendor-react-router-dom-D6uELkfw.js";import"./vendor-react-router-B_FrsTVh.js";import"./vendor-remix-run-router-9r-WWGj9.js";import"./vendor-mui-material-DksXbHt-.js";import"./vendor-mui-utils-B23qfrSe.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-mui-system-BndTH9qf.js";import"./vendor-mui-styled-engine-CPmDJbkS.js";import"./vendor-emotion-styled-5vLscvJp.js";import"./vendor-babel-runtime-WXw8LxeR.js";import"./vendor-emotion-serialize-B6qc6euy.js";import"./vendor-emotion-hash-WldOFDRm.js";import"./vendor-emotion-unitless-x5IvBceT.js";import"./vendor-emotion-memoize-3S_6p140.js";import"./vendor-emotion-use-insertion-effect-with-fallbacks-B--OEmuQ.js";import"./vendor-emotion-utils-BijCJQMc.js";import"./vendor-emotion-is-prop-valid-DOnQZHJ6.js";import"./vendor-emotion-react-DrbGOuDy.js";import"./vendor-hoist-non-react-statics-mDtaWys7.js";import"./vendor-react-is-CnyDuYXe.js";import"./vendor-emotion-cache-DvsOMRO7.js";import"./vendor-emotion-sheet-6IwnyhEX.js";import"./vendor-stylis-DDa9OTMq.js";import"./vendor-react-transition-group-Q1VPUTjR.js";import"./vendor-three-CGYwrSEf.js";import"./vendor-katex-DP_4UPSs.js";function Se(){return e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",className:"animate-spin",children:[e.jsx("path",{d:"M20 5 Q25 10 20 15 Q15 20 20 25 Q25 30 20 35",stroke:"#3b82f6",strokeWidth:"2",fill:"none",className:"animate-pulse"}),e.jsx("path",{d:"M20 5 Q15 10 20 15 Q25 20 20 25 Q15 30 20 35",stroke:"#3b82f6",strokeWidth:"2",fill:"none",className:"animate-pulse",style:{animationDelay:"0.5s"}})]})})}function Te(i,ae=()=>!0){const _=i.filter(ae);return _.length?_[Math.floor(Math.random()*_.length)]:null}function Ht({questions:i=[],tournamentName:ae=null,lazy:_=null}){const{tournaments:Y,tournamentGroups:v,selectedTournaments:P,setSelectedTournaments:$,selectedCategories:V,setSelectedCategories:y,tournamentGroupsOpen:ke,setTournamentGroupsOpen:J,tournamentVisibleEntriesMainRef:le,handleTournamentToggle:l,validQuestions:q,categories:ie,inRanges:Z,roundRanges:Q,setRoundRanges:N,roundsByTournament:oe,globalNumericRoundMax:m}=$e({questions:i,lazy:_}),{dark:U}=Ve(),ce=!!U,[j,D]=r.useState(!1),[R,M]=r.useState(!1),[ee,W]=r.useState(!0),[c,de]=r.useState(()=>{try{const s=localStorage.getItem("sb_leftPaneWidth_practice"),a=Number(s);return Number.isFinite(a)&&a>=220&&a<=720?a:320}catch{return 320}}),L=r.useRef(!1),O=r.useRef(0),S=r.useRef(320);r.useEffect(()=>{function s(u){if(!L.current)return;const z=(u.touches?u.touches[0].clientX:u.clientX)-O.current;let K=Math.round(S.current+z);K=Math.max(220,Math.min(720,K)),de(K)}function a(){if(L.current){L.current=!1;try{localStorage.setItem("sb_leftPaneWidth_practice",String(c))}catch{}document.body.style.cursor="",document.body.style.userSelect=""}}return window.addEventListener("mousemove",s),window.addEventListener("mouseup",a),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",a),()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",a)}},[c]);const[te,se]=r.useState([]),[E,I]=r.useState(!0),[g,ue]=r.useState(!0),[p,me]=r.useState(!1),[w,T]=r.useState(!1);r.useEffect(()=>{p||T(!1)},[p]);const[x,F]=r.useState(5),C=r.useMemo(()=>{const s=new Set(V);return q.filter(a=>{if(V.length&&!s.has(a.category)||!Z(a))return!1;const u=a.question_type?.toLowerCase(),k=we(a);return u==="tossup"?E:u==="bonus"?!g&&!p?!1:p&&w||!g&&p?k:g&&!p?!k:!0:!1})},[q,V,Z,E,g,p,w]),[b,ne]=r.useState(null),[H,re]=r.useState(""),[B,X]=r.useState(""),[t,o]=r.useState(null),[n,d]=r.useState(!1),[f,h]=r.useState(null),[ze,xe]=r.useState(!1),[Ae,pe]=r.useState(null),fe=r.useMemo(()=>{const s=C.some(u=>u.question_type?.toLowerCase()==="tossup"),a=C.some(u=>u.question_type?.toLowerCase()==="bonus");return E&&s?"tossup":a?"bonus":null},[C,E]),he=r.useMemo(()=>G(b),[b]);function ve(s,a){if(!a)return{correct:!1};const u=String(a.answer??"").trim().toLowerCase(),k=String(s??"").trim().toLowerCase(),z=u.replace(/[()\s.]/g,"").charAt(0),K=G(a),Ie=new Map(K).get(k),ge={a:"w",b:"x",c:"y",d:"z"}[z]||z;if(["w","x","y","z"].includes(ge)){const ye=ge===k;return{correct:ye,reason:ye?void 0:`Correct: ${ge.toUpperCase()}`}}const je=String(Ie??"").toLowerCase().replace(/\s+/g," ").trim(),Be=u.toLowerCase().replace(/\s+/g," ").trim();return{correct:!!je&&je===Be}}async function _e(){xe(!0),pe("tossup");try{let s;const a=b?.question_type?.toLowerCase()==="tossup",u=String(B||"").trim();if(he.length>0&&!(a&&u.length>0))s=ve(H,b);else{const k=he.length>0&&a&&u.length>0,z={userAnswer:he.length>0&&a&&u.length>0?B:H,correctAnswer:b.answer,question:b.question};k&&(z.choices=he),s=await(k?await De(z):await Ne(z)).json()}if(o(s),s.correct&&a){const k=We(b,C);k&&h({bonus:k,userAnswer:"",result:null,showAnswer:!1})}}catch{o({correct:!1,reason:"Check failed"})}finally{xe(!1),pe(null)}}async function Pe(){if(f){xe(!0),pe("bonus");try{const s=G(f.bonus);let a;s.length>0?a=ve(f.userAnswer,f.bonus):a=await(await Ne({userAnswer:f.userAnswer,correctAnswer:f.bonus.answer,question:f.bonus.question})).json(),h(u=>({...u,result:a}))}catch{h(a=>({...a,result:{correct:!1,reason:"Check failed"}}))}finally{xe(!1),pe(null)}}}return e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative z-10 grid gap-6 w-full md:grid-cols-[var(--left-pane-w)_minmax(0,1fr)]",style:{"--left-pane-w":j&&!R?"25px":`${c}px`},children:[e.jsxs("div",{className:"md:self-start relative",children:[j&&e.jsx("div",{className:"absolute inset-0 z-5",onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1)}),e.jsx("button",{className:"absolute top-2 -right-2 bg-white dark:bg-darkcard border border-black/10 dark:border-white/20 rounded-full p-1 shadow hover:bg-gray-50 dark:hover:bg-white/10 transition z-10",onClick:()=>{j||!ee?(D(!1),W(!0)):(W(!1),D(!0))},onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),title:j?"Expand panel":ee?"Unpin panel":"Pin panel",children:j?R?e.jsx(Me,{className:"h-4 w-4"}):e.jsx(Oe,{className:"h-4 w-4 transition-transform rotate-180"}):ee?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(Me,{className:"h-4 w-4"})}),e.jsxs("div",{className:`glass p-6 space-y-6 bg-white/80 dark:bg-darkcard/70 backdrop-blur transition-all duration-300 ${j&&!R?"opacity-0 pointer-events-none scale-95":"opacity-100 scale-100"}`,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[P.length===0&&e.jsxs("div",{role:"alert","aria-live":"polite",className:"flex items-start gap-2 rounded-lg border-l-4 border-amber-500 bg-amber-50 text-amber-900 dark:border-amber-400 dark:bg-amber-900/20 dark:text-amber-100 px-3 py-2",children:[e.jsx(He,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("div",{className:"text-sm",children:"No tournaments selected."})]}),e.jsx(qe,{tournaments:Y,tournamentGroups:v,selectedTournaments:P,setSelectedTournaments:$,tournamentGroupsOpen:ke,setTournamentGroupsOpen:J,handleTournamentToggle:l,tournamentVisibleEntriesMainRef:le,isDark:ce,showTournamentModal:!1,setShowTournamentModal:()=>{}}),e.jsx(Qe,{categories:ie,selectedCategories:V,setSelectedCategories:y}),e.jsx(Ue,{selectedTournaments:P,tournaments:Y,roundRanges:Q,setRoundRanges:N,roundsByTournament:oe,globalNumericRoundMax:m}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Question Types"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("label",{className:"chip cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:E,onChange:()=>I(s=>!s)})," Toss-ups"]}),e.jsxs("label",{className:`chip cursor-pointer ${!E&&!g?"ring-1 ring-tint bg-tint/10":""}`,children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:g,onChange:()=>ue(s=>!s)})," Bonuses"]}),e.jsxs("label",{className:`chip items-center gap-2 cursor-pointer ${g?"":"opacity-50 pointer-events-none"}`,title:g?"Include image-based bonuses":"Enable Bonuses to toggle",style:{alignItems:"center",minWidth:220,justifyContent:"flex-start",flexWrap:"nowrap",display:"inline-flex"},children:[e.jsx("input",{type:"checkbox",className:"mr-1",checked:p,onChange:()=>me(s=>!s),disabled:!g}),e.jsx("span",{children:"Visual bonuses"}),e.jsxs("span",{className:`${p?"":"opacity-50"} ml-1 flex items-center gap-1`,onClick:s=>s.stopPropagation(),title:p?"Only get visual bonuses":"Enable Visual bonuses first",style:{alignItems:"center"},children:[e.jsx("button",{type:"button",role:"switch","aria-checked":w,"aria-label":"Only visual bonuses",disabled:!p,onClick:()=>T(s=>!s),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-tint/60 ${w?"bg-tint":"bg-black/30 dark:bg-white/30"} ${p?"":"cursor-not-allowed"}`,style:{verticalAlign:"middle"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${w?"translate-x-4":"translate-x-1"}`})}),e.jsx("span",{className:"text-[10px] leading-none text-black/60 dark:text-white/60 select-none ml-1",style:{fontWeight:500},children:"only"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Reading speed"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:1,max:20,step:1,value:x,onChange:s=>F(Number(s.target.value)),"aria-label":"Reading speed in words per second",className:"w-48"}),e.jsxs("div",{className:"text-sm tabular-nums",children:[x," w/s"]})]}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Space to buzz. Enter to check. “n” next, “a” show answer."})]})]}),!j&&e.jsx("div",{role:"separator","aria-orientation":"vertical",title:"Drag to resize",onMouseDown:s=>{j||(L.current=!0,O.current=s.clientX,S.current=c,document.body.style.cursor="col-resize",document.body.style.userSelect="none")},onTouchStart:s=>{if(j)return;const a=s.touches?.[0];a&&(L.current=!0,O.current=a.clientX,S.current=c,document.body.style.cursor="col-resize",document.body.style.userSelect="none")},className:"hidden md:block absolute top-0 -right-5 h-full w-2 cursor-col-resize z-30 transition-colors",children:e.jsx("div",{className:"absolute inset-y-0 left-[-1px] right-[-1px] w-[1px] bg-gray-400 dark:bg-gray-500"})})]}),e.jsxs("div",{className:"min-w-0",children:[b?e.jsx(Ke,{current:b,setCurrent:s=>{b&&se(a=>[...a,b]),ne(s),re(""),X(""),o(null),d(!1),h(null)},pool:C,preferredType:fe,userAnswer:H,setUserAnswer:re,mcTypedAnswer:B,setMcTypedAnswer:X,result:t,setResult:o,showAnswer:n,setShowAnswer:d,bonusState:f,setBonusState:h,check:_e,checkBonus:Pe,readingSpeed:x,checking:ze,checkingTarget:Ae}):e.jsx("div",{className:"glass p-6 bg-white/80 dark:bg-darkcard/70 backdrop-blur",children:C.length?e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("div",{children:"Ready to begin."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{const a=Te(C,fe?(u=>u.question_type?.toLowerCase()===fe):(()=>!0));a&&(ne(a),re(""),X(""),o(null),d(!1),h(null))},children:"Start"})]}):"No questions available. Select tournaments."}),te.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-black/60 dark:text-white/60",children:"Previous Questions"}),te.map((s,a)=>e.jsxs("div",{className:"glass p-4 bg-white/80 dark:bg-darkcard/70 backdrop-blur flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:String(s.tournament).toUpperCase()})," • Round ",s.round," • ",s.category,s.question_number&&e.jsxs(e.Fragment,{children:[" • Q",s.question_number]})," • ",s.question_type?.toLowerCase()==="bonus"?"Bonus":"Toss-up"]}),e.jsx("div",{className:"text-sm text-black/60 dark:text-white/60 truncate max-w-[200px]",children:e.jsx(A,{children:s.answer})})]},s.id||a))]})]})]})})}function Ke({current:i,setCurrent:ae,pool:_,preferredType:Y,userAnswer:v,setUserAnswer:P,mcTypedAnswer:$,setMcTypedAnswer:V,result:y,setResult:ke,showAnswer:J,setShowAnswer:le,bonusState:l,setBonusState:q,check:ie,checkBonus:Z,readingSpeed:Q,checking:N,checkingTarget:oe}){const m=r.useMemo(()=>G(i),[i]),[U,ce]=be.useState(null),[j,D]=be.useState(!1),[R,M]=be.useState(null),[ee,W]=be.useState(!1),[c,de]=r.useState(!1),[L,O]=r.useState(0),[S,te]=r.useState(!0),se=r.useRef(null),E=r.useRef(null),[I,g]=r.useState(0),[ue,p]=r.useState(!1),me=r.useMemo(()=>String(i?.question??""),[i?.id]),w=r.useMemo(()=>me.split(/\s+/).filter(Boolean),[me]),T=L>=w.length,x=String(i?.question_type||"").toLowerCase()==="bonus",F=x||c||T;r.useEffect(()=>{if(!i||!S||c||w.length===0)return;const t=Math.max(50,Math.round(1e3/Math.max(1,Q))),o=setInterval(()=>{O(n=>n>=w.length?w.length:n+1)},t);return()=>clearInterval(o)},[i?.id,S,c,w.length,Q]),r.useEffect(()=>{de(!1),O(0),te(!0),g(0),p(!1)},[i?.id]),r.useEffect(()=>{if(!i||m.length===0||!T||c||I>=4)return;const t=Math.max(250,1e3-Math.min(20,Q)*25),o=setInterval(()=>{g(n=>Math.min(4,n+1))},t);return()=>clearInterval(o)},[i?.id,T,m.length,I,Q,c]),r.useEffect(()=>{if(!i||m.length===0||!y||I>=4)return;ue||p(!0);const o=setInterval(()=>{g(n=>n>=4?4:n+1)},150);return()=>clearInterval(o)},[y,i?.id,m.length,I,ue]),r.useEffect(()=>{function t(n){return n&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable)}const o=n=>{const d=n.key,f=n.target;if((d===" "||d==="Spacebar")&&(t(f)||(n.preventDefault(),x?m.length===0&&setTimeout(()=>se.current?.focus(),0):!c&&S&&(de(!0),te(!1),m.length===0&&setTimeout(()=>se.current?.focus(),0)))),d==="Enter"){if(l&&!l.result&&l.userAnswer){n.preventDefault(),Z();return}(m.length>0?(x||c)&&(!x&&c&&String($).trim().length>0||!!v):F&&String(v).trim().length>0)&&(n.preventDefault(),ie())}if((d==="n"||d==="N")&&!t(f)&&(n.preventDefault(),N||C()),(d==="a"||d==="A")&&!t(f)&&(n.preventDefault(),le(h=>!h)),!t(f)&&(x||c)&&m.length>0){const h=d.toLowerCase();(h==="w"||h==="x"||h==="y"||h==="z")&&(n.preventDefault(),P(h))}!t(f)&&!x&&c&&m.length>0&&(d==="t"||d==="T")&&(n.preventDefault(),setTimeout(()=>E.current?.focus(),0))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[c,S,m.length,F,v,l,$,N]),r.useEffect(()=>{let t=!1;async function o(){ce(null);const n=i;if(!n||n.question_type?.toLowerCase()!=="bonus"||!we(n))return;const d=await Ce({tournament:n.tournament,round:n.round,question_number:n.question_number}).catch(()=>null);t||ce(d)}return o(),()=>{t=!0}},[i?.id]),r.useEffect(()=>{let t=!1;async function o(){M(null);const n=l?.bonus;if(!n||!we(n))return;const d=await Ce({tournament:n.tournament,round:n.round,question_number:n.question_number}).catch(()=>null);t||M(d)}return o(),()=>{t=!0}},[l?.bonus?.id]);function C(){const o=Te(_,Y?(n=>n.question_type?.toLowerCase()===Y):(()=>!0));N||ae(o)}function b(t){if(!t||typeof t!="object")return null;const o=["explanation","Explanation","rationale","Rationale","solution","Solution","notes","Notes","why"];for(const n of o){const d=t[n];if(typeof d=="string"&&d.trim())return d.trim()}return null}const ne=r.useMemo(()=>b(i),[i?.id]),H=r.useMemo(()=>b(l?.bonus),[l?.bonus?.id]),re=String(i.tournament).toUpperCase(),B=x?!0:c,X=r.useMemo(()=>{if(!Array.isArray(m)||m.length===0)return[];const t=new Map(m);return["w","x","y","z"].map(n=>[n,t.get(n)])},[m]);return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx("style",{children:`
        /* Keep display-math inline, no big margins */
        .practice-katex .katex-display { margin: 0; }
        .practice-katex .katex-display > .katex { display: inline !important; }

        /* Minimize extra space around inline math */
        .practice-katex .katex { margin-left: 0.05em; margin-right: 0.02em; }
        /* If math is the very first thing in a block, don't indent it */
        .practice-katex > .katex:first-child { margin-left: 0; }
      `}),e.jsxs("div",{className:"glass p-6 bg-white/80 dark:bg-darkcard/70 backdrop-blur",children:[e.jsxs("div",{className:"text-sm text-black/60 dark:text-white/80 mb-2",children:[e.jsx("span",{className:"font-semibold",children:re})," • ","ROUND ",i.round??"—"," • ",i.category,i.question_number!=null&&e.jsxs(e.Fragment,{children:[" • ","Q",i.question_number]}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-200 dark:border-purple-700",children:x?"BONUS":"TOSS-UP"}),e.jsx("span",{className:"ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold tracking-wide border bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-700",children:m.length>0?"MULTIPLE CHOICE":"SHORT ANSWER"})]}),i?.question_type?.toLowerCase()==="bonus"&&U&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:U,alt:`Visual bonus${i?.tournament?` • ${i.tournament}`:""}${i?.round?` • Round ${i.round}`:""}${i?.question_number!=null?` • Q${i.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>D(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),T?e.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:e.jsx(A,{children:i.question})}):e.jsxs("div",{className:"text-lg leading-relaxed whitespace-pre-line practice-katex",children:[e.jsx(A,{children:w.slice(0,Math.min(L,w.length)).join(" ")}),!c&&e.jsx("div",{className:"mt-2 text-sm text-black/60 dark:text-white/60",children:"Press space to buzz"})]})]}),e.jsxs("div",{className:"glass p-6 bg-white/80 dark:bg-darkcard/70 backdrop-blur flex flex-col justify-between",style:{minHeight:"40vh",width:"100%"},children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your answer"}),Array.isArray(m)&&m.length>0?e.jsxs("div",{className:"space-y-3 text-lg mb-4",children:[!T&&!c&&!x?e.jsx("div",{className:"text-sm text-black/60 dark:text-white/70",children:"Choices will appear after the question is read."}):X.map(([t,o],n)=>e.jsxs("label",{className:`flex items-baseline gap-2 ${B?"cursor-pointer":"cursor-not-allowed opacity-75"}`,children:[e.jsx("input",{type:"radio",name:`tossup-mc-${i.id}`,value:t,checked:String(v)===String(t),onChange:()=>P(t),className:"accent-tint w-5 h-5",disabled:!B}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),")"," ",n<I&&o?e.jsx(A,{children:o}):e.jsx("span",{className:"text-black/50 dark:text-white/50",children:"…"})]})]},t)),!x&&c&&e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:$,onChange:t=>V(t.target.value),placeholder:"Type your answer (press “t” to focus)",ref:E,disabled:!B})]}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:v,onChange:t=>P(t.target.value),placeholder:"Type your answer",ref:se,disabled:!F}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[(()=>{const t=X.length>0?(x||c)&&(!x&&c&&String($).trim().length>0||!!v):F&&!!v;return e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:ie,disabled:!t,title:"Check answer",children:e.jsx(Ee,{size:16})})})(),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>le(t=>!t),title:J?"Hide answer":"Reveal answer",children:J?e.jsx(Re,{size:16}):e.jsx(Le,{size:16})}),e.jsx("button",{className:`btn btn-ghost px-3 py-1.5 text-base ${N?"bg-gray-200 text-gray-500 dark:bg-neutral-800 dark:text-gray-400 cursor-not-allowed":""}`,onClick:C,disabled:N,title:N?"Please wait—checking in progress":"Next question",children:e.jsx(Xe,{size:16})})]}),N&&oe==="tossup"?e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border bg-blue-100 text-blue-900 border-blue-200 dark:bg-blue-900/20 dark:text-blue-100 dark:border-blue-800 flex items-center gap-3",children:[e.jsx(Se,{}),e.jsx("span",{className:"font-medium",children:"Checking answer..."})]}):y&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(y.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[y.correct?"Correct":"Incorrect",y.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:y.reason}):null,!y.correct&&ne&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",ne]})]}),J&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"ANSWER"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx(A,{children:i.answer.toUpperCase()})})]}),l&&e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Bonus"}),R&&e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:R,alt:`Visual bonus${l?.bonus?.tournament?` • ${l.bonus.tournament}`:""}${l?.bonus?.round?` • Round ${l.bonus.round}`:""}${l?.bonus?.question_number!=null?` • Q${l.bonus.question_number}`:""}`,className:"max-h-64 rounded-md border border-black/10 dark:border-white/10 object-contain cursor-zoom-in hover:opacity-95 transition",onClick:()=>W(!0)}),e.jsx("div",{className:"text-xs text-black/60 dark:text-white/60 mt-1",children:"Click image to view full screen"})]}),e.jsx("div",{className:"mb-2 whitespace-pre-line text-lg practice-katex",children:e.jsx(A,{children:l.bonus.question})}),G(l.bonus).length>0?e.jsx("div",{className:"space-y-2 text-lg mb-4",children:G(l.bonus).map(([t,o])=>e.jsxs("label",{className:"flex items-baseline gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`bonus-mc-${l.bonus.id}`,value:t,checked:String(l.userAnswer)===String(t),onChange:()=>q(n=>({...n,userAnswer:t})),className:"accent-tint w-5 h-5",disabled:!!l.result}),e.jsxs("span",{className:"practice-katex",children:[t.toUpperCase(),") ",e.jsx(A,{children:o})]})]},t))}):e.jsx("input",{className:"w-full rounded-xl border border-black/10 bg-white dark:bg-darkcard text-black dark:text-white px-4 py-3 outline-none focus:ring-2 focus:ring-tint text-lg",value:l.userAnswer,onChange:t=>q(o=>({...o,userAnswer:t.target.value})),placeholder:"Type your answer",disabled:!!l.result}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{className:"btn btn-primary px-3 py-1.5 text-base",onClick:Z,disabled:!l.userAnswer||!!l.result,title:"Check answer",children:e.jsx(Ee,{size:16})}),e.jsx("button",{className:"btn btn-ghost px-3 py-1.5 text-base",onClick:()=>q(t=>({...t,showAnswer:!t.showAnswer})),title:l.showAnswer?"Hide answer":"Reveal answer",children:l.showAnswer?e.jsx(Re,{size:16}):e.jsx(Le,{size:16})})]}),N&&oe==="bonus"&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border bg-blue-100 text-blue-900 border-blue-200 dark:bg-blue-900/20 dark:text-blue-100 dark:border-blue-800 flex items-center gap-3",children:[e.jsx(Se,{}),e.jsx("span",{className:"font-medium",children:"Checking answer..."})]}),l.result&&e.jsxs("div",{className:"mt-4 rounded-xl px-4 py-3 border "+(l.result.correct?"bg-green-100 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800":"bg-red-100 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800"),children:[l.result.correct?"Correct":"Incorrect",l.result.reason?e.jsx("div",{className:"text-sm text-black/70 dark:text-white/80",children:l.result.reason}):null,!l.result.correct&&H&&e.jsxs("div",{className:"mt-2 text-sm text-black/80 dark:text-white/80 whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",H]})]}),l.showAnswer&&e.jsxs("div",{className:"mt-4 rounded-xl bg-black/5 dark:bg-white/10 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-black/60 dark:text-white/60",children:"Answer"}),e.jsx("div",{className:"font-medium text-black dark:text-white",children:e.jsx(A,{children:l.bonus.answer})})]})]})]}),j&&U&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>D(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:U,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>D(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]}),ee&&R&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":"Visual bonus image",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>W(!1)}),e.jsxs("div",{className:"relative max-w-[96vw] max-h-[96vh] p-2",children:[e.jsx("img",{src:R,alt:"Visual bonus full screen",className:"max-w-[96vw] max-h-[92vh] object-contain rounded shadow-2xl"}),e.jsx("button",{type:"button",className:"absolute -top-3 -right-3 bg-white text-black rounded-full shadow p-2 hover:bg-white/90 focus:outline-none","aria-label":"Close full screen image",onClick:()=>W(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M4.22 4.22a.75.75 0 011.06 0L10 8.94l4.72-4.72a.75.75 0 111.06 1.06L11.06 10l4.72 4.72a.75.75 0 11-1.06 1.06L10 11.06l-4.72 4.72a.75.75 0 01-1.06-1.06L8.94 10 4.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]})]})}export{Ht as default};
